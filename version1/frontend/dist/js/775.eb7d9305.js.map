{"version":3,"file":"js/775.eb7d9305.js","mappings":"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","sources":["webpack://secondhand-frontend/./src/api/index.js","webpack://secondhand-frontend/./src/views/ProductUpdate.vue","webpack://secondhand-frontend/./src/views/ProductUpdate.vue?fe6a"],"sourcesContent":["import axios from 'axios'\n\n// 用户相关API\nexport const userAPI = {\n  // 用户注册\n  register: (data) => {\n    return axios.post('/users/register', data)\n  },\n  \n  // 用户登录\n  login: (data) => {\n    return axios.post('/users/login', data)\n  },\n  \n  // 获取当前用户信息\n  getCurrentUser: () => {\n    return axios.get('/users/me')\n  },\n  \n  // 更新用户信息\n  updateUser: (data) => {\n    return axios.put('/users/me', data)\n  },\n  \n  // 获取用户列表（管理员）\n  getUsers: (params) => {\n    return axios.get('/users', { params })\n  }\n}\n\n// 商品相关API\nexport const productAPI = {\n  // 创建商品\n  createProduct: (data) => {\n    return axios.post('/products', data)\n  },\n  \n  // 获取商品列表\n  getProducts: (params) => {\n    return axios.get('/products', { params })\n  },\n  \n  // 获取商品详情\n  getProductById: (id) => {\n    return axios.get(`/products/${id}`)\n  },\n  \n  // 更新商品\n  updateProduct: (id, data) => {\n    return axios.put(`/products/${id}`, data)\n  },\n  \n  // 删除商品\n  deleteProduct: (id) => {\n    return axios.delete(`/products/${id}`)\n  },\n  \n  // 获取我的商品\n  getMyProducts: () => {\n    return axios.get('/products/my')\n  },\n  \n  // 搜索商品\n  searchProducts: (keyword) => {\n    return axios.get('/products/search', { params: { keyword } })\n  }\n}\n\n// 交易相关API\nexport const tradeAPI = {\n  // 申请交易\n  applyTrade: (data) => {\n    return axios.post('/trades/apply', data)\n  },\n  \n  // 接受交易\n  acceptTrade: (id) => {\n    return axios.post(`/trades/${id}/accept`)\n  },\n  \n  // 拒绝交易\n  rejectTrade: (id) => {\n    return axios.post(`/trades/${id}/reject`)\n  },\n  \n  // 取消交易\n  cancelTrade: (id) => {\n    return axios.post(`/trades/${id}/cancel`)\n  },\n  \n  // 完成交易\n  completeTrade: (id) => {\n    return axios.post(`/trades/${id}/complete`)\n  },\n  \n  // 获取交易详情\n  getTradeById: (id) => {\n    return axios.get(`/trades/${id}`)\n  },\n  \n  // 获取我作为买家的交易\n  getMyBuyTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/buyer/${userInfo?.id}`)\n  },\n  \n  // 获取我作为卖家的交易\n  getMySellTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/seller/${userInfo?.id}`)\n  },\n  \n  // 获取商品的交易记录\n  getProductTrades: (productId) => {\n    return axios.get(`/trades/product/${productId}`)\n  }\n}\n\n// 上传图片API\nexport const uploadAPI = {\n  // 上传图片\n  uploadImage: (formData) => {\n    return axios.post('/upload/image', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  }\n}","<template>\n  <div class=\"product-update-container\">\n    <div v-if=\"loading\" class=\"loading\">\n      <el-spinner type=\"spinner\" />\n      <p>加载中...</p>\n    </div>\n    <el-card v-else-if=\"product\" class=\"update-card\">\n      <template #header>\n        <div class=\"card-header\">编辑商品</div>\n      </template>\n      <el-form :model=\"productForm\" :rules=\"productRules\" ref=\"productFormRef\" label-width=\"100px\" class=\"update-form\">\n        <el-form-item label=\"商品名称\" prop=\"name\">\n          <el-input v-model=\"productForm.name\" placeholder=\"请输入商品名称\" maxlength=\"100\" show-word-limit />\n        </el-form-item>\n        <el-form-item label=\"商品分类\" prop=\"categoryId\">\n          <el-select v-model=\"productForm.categoryId\" placeholder=\"请选择商品分类\">\n            <el-option label=\"电子产品\" value=\"1\" />\n            <el-option label=\"图书文具\" value=\"2\" />\n            <el-option label=\"服装鞋帽\" value=\"3\" />\n            <el-option label=\"生活用品\" value=\"4\" />\n            <el-option label=\"其他\" value=\"5\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"商品价格\" prop=\"price\">\n          <el-input v-model.number=\"productForm.price\" placeholder=\"请输入商品价格\" prefix-icon=\"el-icon-price-tag\">\n            <template #prepend>¥</template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"商品图片\" prop=\"images\">\n          <el-upload\n            v-model:file-list=\"fileList\"\n            class=\"upload-demo\"\n            action=\"\"\n            :auto-upload=\"false\"\n            :on-change=\"handleFileChange\"\n            :limit=\"5\"\n            list-type=\"picture-card\"\n            :on-exceed=\"handleExceed\"\n          >\n            <el-icon><Plus /></el-icon>\n            <template #tip>\n              <div class=\"el-upload__tip\">\n                请上传商品图片，最多5张，单张不超过10MB\n              </div>\n            </template>\n          </el-upload>\n          <el-dialog v-model=\"dialogVisible\" title=\"预览\" width=\"800px\">\n            <img :src=\"dialogImageUrl\" alt=\"预览图片\" style=\"width: 100%\" />\n          </el-dialog>\n        </el-form-item>\n        <el-form-item label=\"商品描述\" prop=\"description\">\n          <el-input\n            v-model=\"productForm.description\"\n            type=\"textarea\"\n            :rows=\"6\"\n            placeholder=\"请详细描述商品信息，如：品牌、规格、使用时间、成色等\"\n            maxlength=\"2000\"\n            show-word-limit\n          />\n        </el-form-item>\n        <el-form-item label=\"商品状态\" prop=\"status\">\n          <el-radio-group v-model=\"productForm.status\">\n            <el-radio label=\"1\">上架</el-radio>\n            <el-radio label=\"0\">下架</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"submitting\" size=\"large\">保存修改</el-button>\n          <el-button @click=\"resetForm\" size=\"large\">重置</el-button>\n          <el-button @click=\"goBack\" size=\"large\">返回</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <div v-else class=\"not-found\">\n      <el-empty description=\"商品不存在或已删除\" />\n      <el-button type=\"primary\" @click=\"goBack\">返回</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Plus } from '@element-plus/icons-vue'\nimport { productAPI } from '../api'\n\nexport default {\n  name: 'ProductUpdate',\n  components: {\n    Plus\n  },\n  data() {\n    return {\n      product: null,\n      productForm: {\n        name: '',\n        categoryId: '',\n        price: '',\n        description: '',\n        images: [],\n        status: '1'\n      },\n      productRules: {\n        name: [\n          { required: true, message: '请输入商品名称', trigger: 'blur' },\n          { min: 2, max: 100, message: '商品名称长度在 2 到 100 个字符', trigger: 'blur' }\n        ],\n        categoryId: [\n          { required: true, message: '请选择商品分类', trigger: 'change' }\n        ],\n        price: [\n          { required: true, message: '请输入商品价格', trigger: 'blur' },\n          { type: 'number', min: 0.01, message: '价格必须大于0', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '请输入商品描述', trigger: 'blur' },\n          { min: 10, max: 2000, message: '商品描述长度在 10 到 2000 个字符', trigger: 'blur' }\n        ],\n        images: [\n          { required: true, message: '请至少上传一张商品图片', trigger: 'change' }\n        ]\n      },\n      fileList: [],\n      dialogVisible: false,\n      dialogImageUrl: '',\n      loading: false,\n      submitting: false\n    }\n  },\n  mounted() {\n    this.loadProductDetail()\n  },\n  methods: {\n    async loadProductDetail() {\n      const productId = this.$route.params.id\n      this.loading = true\n      try {\n        const response = await productAPI.getProductById(productId)\n        this.product = response\n        // 填充表单数据\n        this.productForm = {\n          name: response.name,\n          categoryId: response.categoryId,\n          price: response.price,\n          description: response.description,\n          images: this.getImagesArray(response.images),\n          status: response.status.toString()\n        }\n        // 初始化文件列表\n        this.initFileList(this.productForm.images)\n      } catch (error) {\n        this.$message.error('加载商品信息失败')\n        this.product = null\n      } finally {\n        this.loading = false\n      }\n    },\n    getImagesArray(images) {\n      if (!images) return []\n      return typeof images === 'string' ? JSON.parse(images) : images\n    },\n    initFileList(imageUrls) {\n      this.fileList = imageUrls.map(url => ({\n        url,\n        name: url.split('/').pop(),\n        status: 'success'\n      }))\n    },\n    handleFileChange(file, fileList) {\n      this.fileList = fileList\n      // 更新商品图片数组\n      this.productForm.images = fileList.map(file => {\n        return file.url || URL.createObjectURL(file.raw)\n      })\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`最多只能上传5张图片，已忽略多余${files.length}张图片`)\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url || URL.createObjectURL(file.raw)\n      this.dialogVisible = true\n    },\n    async submitForm() {\n      this.$refs.productFormRef.validate(async (valid) => {\n        if (valid) {\n          this.submitting = true\n          try {\n            const formData = {\n              name: this.productForm.name,\n              categoryId: this.productForm.categoryId,\n              price: this.productForm.price,\n              description: this.productForm.description,\n              images: JSON.stringify(this.productForm.images),\n              status: parseInt(this.productForm.status)\n            }\n            \n            await productAPI.updateProduct(this.product.id, formData)\n            \n            this.$message.success('商品更新成功')\n            this.$router.push('/user/products')\n          } catch (error) {\n            this.$message.error(error.response?.data?.message || '更新失败，请重试')\n          } finally {\n            this.submitting = false\n          }\n        }\n      })\n    },\n    resetForm() {\n      this.$refs.productFormRef.resetFields()\n      // 重新初始化文件列表\n      this.initFileList(this.getImagesArray(this.product.images))\n    },\n    goBack() {\n      this.$router.go(-1)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.product-update-container {\n  padding: 0;\n}\n\n.loading,\n.not-found {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 20px;\n}\n\n.update-card {\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.update-form {\n  padding-top: 20px;\n}\n\n.upload-demo .el-upload-list {\n  margin-bottom: 16px;\n}\n\n.upload-demo .el-upload {\n  margin-bottom: 16px;\n}\n\n.el-upload__tip {\n  margin-top: 8px;\n  font-size: 14px;\n  color: #909399;\n}\n\n@media (max-width: 768px) {\n  .update-card {\n    max-width: 100%;\n  }\n  \n  .el-form {\n    label-width: 80px;\n  }\n}\n</style>","import { render } from \"./ProductUpdate.vue?vue&type=template&id=72b76f0e&scoped=true\"\nimport script from \"./ProductUpdate.vue?vue&type=script&lang=js\"\nexport * from \"./ProductUpdate.vue?vue&type=script&lang=js\"\n\nimport \"./ProductUpdate.vue?vue&type=style&index=0&id=72b76f0e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-72b76f0e\"]])\n\nexport default __exports__"],"names":["userAPI","register","data","axios","post","login","getCurrentUser","get","updateUser","put","getUsers","params","productAPI","createProduct","getProducts","getProductById","id","updateProduct","deleteProduct","delete","getMyProducts","searchProducts","keyword","tradeAPI","applyTrade","acceptTrade","rejectTrade","cancelTrade","completeTrade","getTradeById","getMyBuyTrades","userInfo","JSON","parse","localStorage","getItem","getMySellTrades","getProductTrades","productId","class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_createVNode","_component_el_spinner","type","_createElementVNode","product","_createBlock","_component_el_card","header","_withCtx","_cache","_component_el_form","model","productForm","rules","productRules","ref","_component_el_form_item","label","prop","_component_el_input","name","$event","placeholder","maxlength","_component_el_select","categoryId","_component_el_option","value","price","number","prepend","_component_el_upload","fileList","action","$options","handleFileChange","limit","handleExceed","tip","_component_el_icon","_component_Plus","_component_el_dialog","dialogVisible","title","width","src","dialogImageUrl","alt","style","description","rows","_component_el_radio_group","status","_component_el_radio","_component_el_button","onClick","submitForm","submitting","size","resetForm","goBack","_hoisted_4","_component_el_empty","components","Plus","images","required","message","trigger","min","max","mounted","this","loadProductDetail","methods","$route","response","getImagesArray","toString","initFileList","error","$message","imageUrls","map","url","split","pop","file","URL","createObjectURL","raw","files","warning","length","handlePictureCardPreview","$refs","productFormRef","validate","async","valid","formData","stringify","parseInt","success","$router","push","resetFields","go","__exports__","render"],"sourceRoot":""}
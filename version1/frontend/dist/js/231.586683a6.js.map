{"version":3,"file":"js/231.586683a6.js","mappings":"kLACOA,MAAM,mB,sKAAXC,EAAAA,EAAAA,IAqBM,MArBNC,EAqBM,EApBJC,EAAAA,EAAAA,IAmBUC,EAAA,CAnBDJ,MAAM,cAAY,CACdK,QAAMC,EAAAA,EAAAA,IACf,IAGM,IAAAC,EAAA,KAAAA,EAAA,KAHNC,EAAAA,EAAAA,IAGM,OAHDR,MAAM,eAAa,EACtBQ,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAAW,SAAR,U,wBAGP,IAWU,EAXVL,EAAAA,EAAAA,IAWUM,EAAA,CAXAC,MAAOC,EAAAC,UAAYC,MAAOF,EAAAG,WAAYC,IAAI,eAAe,cAAY,Q,kBAC7E,IAEe,EAFfZ,EAAAA,EAAAA,IAEea,EAAA,CAFDC,MAAM,MAAMC,KAAK,Y,kBAC7B,IAAyF,EAAzFf,EAAAA,EAAAA,IAAyFgB,EAAA,C,WAAtER,EAAAC,UAAUQ,S,qCAAVT,EAAAC,UAAUQ,SAAQC,GAAEC,YAAY,SAAS,cAAY,gB,gCAE1EnB,EAAAA,EAAAA,IAEea,EAAA,CAFDC,MAAM,KAAKC,KAAK,Y,kBAC5B,IAAsH,EAAtHf,EAAAA,EAAAA,IAAsHgB,EAAA,C,WAAnGR,EAAAC,UAAUW,S,qCAAVZ,EAAAC,UAAUW,SAAQF,GAAEG,KAAK,WAAWF,YAAY,QAAQ,cAAY,eAAe,oB,gCAExGnB,EAAAA,EAAAA,IAGea,EAAA,M,iBAFb,IAAkG,EAAlGb,EAAAA,EAAAA,IAAkGsB,EAAA,CAAvFD,KAAK,UAAWE,QAAOC,EAAAC,YAAcC,QAASlB,EAAAkB,QAAS7B,MAAM,a,kBAAY,IAAE,IAAAO,EAAA,KAAAA,EAAA,K,QAAF,MAAE,O,+BACtFJ,EAAAA,EAAAA,IAA4DsB,EAAA,CAAjDD,KAAK,OAAQE,QAAOC,EAAAG,c,kBAAc,IAAG,IAAAvB,EAAA,KAAAA,EAAA,K,QAAH,OAAG,O,+EAU1D,SACEwB,KAAM,YACNC,IAAAA,GACE,MAAO,CACLpB,UAAW,CACTQ,SAAU,GACVG,SAAU,IAEZT,WAAY,CACVM,SAAU,CACR,CAAEa,UAAU,EAAMC,QAAS,SAAUC,QAAS,QAC9C,CAAEC,IAAK,EAAGC,IAAK,GAAIH,QAAS,oBAAqBC,QAAS,SAE5DZ,SAAU,CACR,CAAEU,UAAU,EAAMC,QAAS,QAASC,QAAS,QAC7C,CAAEC,IAAK,EAAGF,QAAS,iBAAkBC,QAAS,UAGlDN,SAAS,EAEb,EACAS,QAAS,CACP,iBAAMV,GACJW,KAAKC,MAAMC,aAAaC,SAASC,UAC/B,GAAIC,EAAO,CACTL,KAAKV,SAAU,EACf,IACE,MAAMgB,QAAiBC,EAAAA,GAAQC,MAAMR,KAAK3B,WAE1CoC,aAAaC,QAAQ,QAASJ,EAASK,OACvCF,aAAaC,QAAQ,WAAYE,KAAKC,UAAUP,EAASQ,OAEzDd,KAAKe,SAASC,QAAQ,QAEtBhB,KAAKiB,QAAQC,KAAK,IACpB,CAAE,MAAOC,GACPnB,KAAKe,SAASI,MAAMA,EAAMb,UAAUb,MAAME,SAAW,iBACvD,CAAE,QACAK,KAAKV,SAAU,CACjB,CACF,GAEJ,EACAC,YAAAA,GACES,KAAKiB,QAAQC,KAAK,YACpB,I,aClEJ,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G,iECNO,MAAMd,EAAU,CAErBe,SAAW7B,GACF8B,EAAAA,EAAMC,KAAK,kBAAmB/B,GAIvCe,MAAQf,GACC8B,EAAAA,EAAMC,KAAK,eAAgB/B,GAIpCgC,eAAgBA,IACPF,EAAAA,EAAMG,IAAI,aAInBC,WAAalC,GACJ8B,EAAAA,EAAMK,IAAI,YAAanC,GAIhCoC,SAAWC,GACFP,EAAAA,EAAMG,IAAI,SAAU,CAAEI,YAKpBC,EAAa,CAExBC,cAAgBvC,GACP8B,EAAAA,EAAMC,KAAK,YAAa/B,GAIjCwC,YAAcH,GACLP,EAAAA,EAAMG,IAAI,YAAa,CAAEI,WAIlCI,eAAiBC,GACRZ,EAAAA,EAAMG,IAAI,aAAaS,KAIhCC,cAAeA,CAACD,EAAI1C,IACX8B,EAAAA,EAAMK,IAAI,aAAaO,IAAM1C,GAItC4C,cAAgBF,GACPZ,EAAAA,EAAMe,OAAO,aAAaH,KAInCI,cAAeA,IACNhB,EAAAA,EAAMG,IAAI,gBAInBc,eAAiBC,GACRlB,EAAAA,EAAMG,IAAI,mBAAoB,CAAEI,OAAQ,CAAEW,cAKxCC,EAAW,CAEtBC,WAAalD,GACJ8B,EAAAA,EAAMC,KAAK,gBAAiB/B,GAIrCmD,YAAcT,GACLZ,EAAAA,EAAMC,KAAK,WAAWW,YAI/BU,YAAcV,GACLZ,EAAAA,EAAMC,KAAK,WAAWW,YAI/BW,YAAcX,GACLZ,EAAAA,EAAMC,KAAK,WAAWW,YAI/BY,cAAgBZ,GACPZ,EAAAA,EAAMC,KAAK,WAAWW,cAI/Ba,aAAeb,GACNZ,EAAAA,EAAMG,IAAI,WAAWS,KAI9Bc,eAAgBA,KACd,MAAMC,EAAWtC,KAAKuC,MAAM1C,aAAa2C,QAAQ,aACjD,OAAO7B,EAAAA,EAAMG,IAAI,iBAAiBwB,GAAUf,OAI9CkB,gBAAiBA,KACf,MAAMH,EAAWtC,KAAKuC,MAAM1C,aAAa2C,QAAQ,aACjD,OAAO7B,EAAAA,EAAMG,IAAI,kBAAkBwB,GAAUf,OAI/CmB,iBAAmBC,GACVhC,EAAAA,EAAMG,IAAI,mBAAmB6B,K","sources":["webpack://secondhand-frontend/./src/views/Login.vue","webpack://secondhand-frontend/./src/views/Login.vue?240b","webpack://secondhand-frontend/./src/api/index.js"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <template #header>\n        <div class=\"login-title\">\n          <h2>校园二手商品交易系统</h2>\n          <p>用户登录</p>\n        </div>\n      </template>\n      <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginFormRef\" label-width=\"80px\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"loginForm.username\" placeholder=\"请输入用户名\" prefix-icon=\"el-icon-user\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"请输入密码\" prefix-icon=\"el-icon-lock\" show-password />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleLogin\" :loading=\"loading\" class=\"login-btn\">登录</el-button>\n          <el-button type=\"text\" @click=\"goToRegister\">去注册</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { userAPI } from '../api'\n\nexport default {\n  name: 'UserLogin',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能少于 6 个字符', trigger: 'blur' }\n        ]\n      },\n      loading: false\n    }\n  },\n  methods: {\n    async handleLogin() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (valid) {\n          this.loading = true\n          try {\n            const response = await userAPI.login(this.loginForm)\n            // 保存token和用户信息\n            localStorage.setItem('token', response.token)\n            localStorage.setItem('userInfo', JSON.stringify(response.user))\n            // 显示成功消息\n            this.$message.success('登录成功')\n            // 跳转到首页\n            this.$router.push('/')\n          } catch (error) {\n            this.$message.error(error.response?.data?.message || '登录失败，请检查用户名和密码')\n          } finally {\n            this.loading = false\n          }\n        }\n      })\n    },\n    goToRegister() {\n      this.$router.push('/register')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n}\n\n.login-card {\n  width: 100%;\n  max-width: 400px;\n  border-radius: 10px;\n  overflow: hidden;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.login-title h2 {\n  color: #303133;\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.login-title p {\n  color: #606266;\n  font-size: 16px;\n}\n\n.login-btn {\n  width: 100%;\n  height: 40px;\n  font-size: 16px;\n}\n\n.el-form {\n  padding: 0 20px 20px;\n}\n</style>","import { render } from \"./Login.vue?vue&type=template&id=a6139918&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=a6139918&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a6139918\"]])\n\nexport default __exports__","import axios from 'axios'\n\n// 用户相关API\nexport const userAPI = {\n  // 用户注册\n  register: (data) => {\n    return axios.post('/users/register', data)\n  },\n  \n  // 用户登录\n  login: (data) => {\n    return axios.post('/users/login', data)\n  },\n  \n  // 获取当前用户信息\n  getCurrentUser: () => {\n    return axios.get('/users/me')\n  },\n  \n  // 更新用户信息\n  updateUser: (data) => {\n    return axios.put('/users/me', data)\n  },\n  \n  // 获取用户列表（管理员）\n  getUsers: (params) => {\n    return axios.get('/users', { params })\n  }\n}\n\n// 商品相关API\nexport const productAPI = {\n  // 创建商品\n  createProduct: (data) => {\n    return axios.post('/products', data)\n  },\n  \n  // 获取商品列表\n  getProducts: (params) => {\n    return axios.get('/products', { params })\n  },\n  \n  // 获取商品详情\n  getProductById: (id) => {\n    return axios.get(`/products/${id}`)\n  },\n  \n  // 更新商品\n  updateProduct: (id, data) => {\n    return axios.put(`/products/${id}`, data)\n  },\n  \n  // 删除商品\n  deleteProduct: (id) => {\n    return axios.delete(`/products/${id}`)\n  },\n  \n  // 获取我的商品\n  getMyProducts: () => {\n    return axios.get('/products/my')\n  },\n  \n  // 搜索商品\n  searchProducts: (keyword) => {\n    return axios.get('/products/search', { params: { keyword } })\n  }\n}\n\n// 交易相关API\nexport const tradeAPI = {\n  // 申请交易\n  applyTrade: (data) => {\n    return axios.post('/trades/apply', data)\n  },\n  \n  // 接受交易\n  acceptTrade: (id) => {\n    return axios.post(`/trades/${id}/accept`)\n  },\n  \n  // 拒绝交易\n  rejectTrade: (id) => {\n    return axios.post(`/trades/${id}/reject`)\n  },\n  \n  // 取消交易\n  cancelTrade: (id) => {\n    return axios.post(`/trades/${id}/cancel`)\n  },\n  \n  // 完成交易\n  completeTrade: (id) => {\n    return axios.post(`/trades/${id}/complete`)\n  },\n  \n  // 获取交易详情\n  getTradeById: (id) => {\n    return axios.get(`/trades/${id}`)\n  },\n  \n  // 获取我作为买家的交易\n  getMyBuyTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/buyer/${userInfo?.id}`)\n  },\n  \n  // 获取我作为卖家的交易\n  getMySellTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/seller/${userInfo?.id}`)\n  },\n  \n  // 获取商品的交易记录\n  getProductTrades: (productId) => {\n    return axios.get(`/trades/product/${productId}`)\n  }\n}\n\n// 上传图片API\nexport const uploadAPI = {\n  // 上传图片\n  uploadImage: (formData) => {\n    return axios.post('/upload/image', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  }\n}"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","_component_el_form","model","$data","loginForm","rules","loginRules","ref","_component_el_form_item","label","prop","_component_el_input","username","$event","placeholder","password","type","_component_el_button","onClick","$options","handleLogin","loading","goToRegister","name","data","required","message","trigger","min","max","methods","this","$refs","loginFormRef","validate","async","valid","response","userAPI","login","localStorage","setItem","token","JSON","stringify","user","$message","success","$router","push","error","__exports__","render","register","axios","post","getCurrentUser","get","updateUser","put","getUsers","params","productAPI","createProduct","getProducts","getProductById","id","updateProduct","deleteProduct","delete","getMyProducts","searchProducts","keyword","tradeAPI","applyTrade","acceptTrade","rejectTrade","cancelTrade","completeTrade","getTradeById","getMyBuyTrades","userInfo","parse","getItem","getMySellTrades","getProductTrades","productId"],"sourceRoot":""}
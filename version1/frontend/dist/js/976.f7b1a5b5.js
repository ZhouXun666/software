"use strict";(self["webpackChunksecondhand_frontend"]=self["webpackChunksecondhand_frontend"]||[]).push([[976],{976:(e,o,t)=>{t.r(o),t.d(o,{default:()=>g});var a=t(641),n=t(751),r=t(33);const s={class:"home-container"},u={class:"header-content"},c={class:"search-container"},l={class:"nav-right"},d={class:"user-dropdown"},i={class:"user-name"};function h(e,o,t,h,k,m){const p=(0,a.g2)("el-button"),f=(0,a.g2)("el-input"),g=(0,a.g2)("el-avatar"),b=(0,a.g2)("arrow-down"),v=(0,a.g2)("el-icon"),L=(0,a.g2)("el-dropdown-item"),_=(0,a.g2)("el-dropdown-menu"),w=(0,a.g2)("el-dropdown"),y=(0,a.g2)("el-header"),F=(0,a.g2)("router-view"),C=(0,a.g2)("el-main"),$=(0,a.g2)("el-footer");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(y,{class:"header"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",u,[(0,a.Lk)("div",{class:"logo",onClick:o[0]||(o[0]=(...e)=>m.toHome&&m.toHome(...e))},[...o[2]||(o[2]=[(0,a.Lk)("h1",null,"校园二手交易",-1)])]),(0,a.Lk)("div",c,[(0,a.bF)(f,{modelValue:k.searchKeyword,"onUpdate:modelValue":o[1]||(o[1]=e=>k.searchKeyword=e),placeholder:"搜索商品","prefix-icon":"el-icon-search",onKeyup:(0,n.jR)(m.handleSearch,["enter"]),class:"search-input"},{append:(0,a.k6)(()=>[(0,a.bF)(p,{onClick:m.handleSearch,icon:"el-icon-search"},null,8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),(0,a.Lk)("div",l,[k.isLogin?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(p,{key:0,type:"text",onClick:m.toLogin},{default:(0,a.k6)(()=>[...o[3]||(o[3]=[(0,a.eW)("登录",-1)])]),_:1},8,["onClick"])),k.isLogin?((0,a.uX)(),(0,a.Wv)(w,{key:2,onCommand:m.handleCommand},{dropdown:(0,a.k6)(()=>[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(L,{command:"info"},{default:(0,a.k6)(()=>[...o[5]||(o[5]=[(0,a.eW)("个人中心",-1)])]),_:1}),(0,a.bF)(L,{command:"products"},{default:(0,a.k6)(()=>[...o[6]||(o[6]=[(0,a.eW)("我的商品",-1)])]),_:1}),(0,a.bF)(L,{command:"trades"},{default:(0,a.k6)(()=>[...o[7]||(o[7]=[(0,a.eW)("我的交易",-1)])]),_:1}),(0,a.bF)(L,{command:"create",type:"primary"},{default:(0,a.k6)(()=>[...o[8]||(o[8]=[(0,a.eW)("发布商品",-1)])]),_:1}),(0,a.bF)(L,{command:"logout",divided:""},{default:(0,a.k6)(()=>[...o[9]||(o[9]=[(0,a.eW)("退出登录",-1)])]),_:1})]),_:1})]),default:(0,a.k6)(()=>[(0,a.Lk)("span",d,[(0,a.bF)(g,{size:32,src:k.userInfo?.avatar||""},{default:(0,a.k6)(()=>[(0,a.eW)((0,r.v_)(k.userInfo?.username?.charAt(0)),1)]),_:1},8,["src"]),(0,a.Lk)("span",i,(0,r.v_)(k.userInfo?.username),1),(0,a.bF)(v,{class:"el-icon--right"},{default:(0,a.k6)(()=>[(0,a.bF)(b)]),_:1})])]),_:1},8,["onCommand"])):((0,a.uX)(),(0,a.Wv)(p,{key:1,type:"primary",onClick:m.toRegister},{default:(0,a.k6)(()=>[...o[4]||(o[4]=[(0,a.eW)("注册",-1)])]),_:1},8,["onClick"]))])])]),_:1}),(0,a.bF)(C,{class:"main"},{default:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(({Component:e})=>[(0,a.bF)(n.eB,{name:"fade",mode:"out-in"},{default:(0,a.k6)(()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e)))]),_:2},1024)]),_:1})]),_:1}),(0,a.bF)($,{class:"footer"},{default:(0,a.k6)(()=>[...o[10]||(o[10]=[(0,a.Lk)("div",{class:"footer-content"},[(0,a.Lk)("p",null,"© 2024 校园二手商品交易系统 - 版权所有"),(0,a.Lk)("p",null,"让闲置物品流动起来，共享美好校园生活")],-1)])]),_:1})])}var k=t(548);const m={name:"HomeLayout",components:{ArrowDown:k.yd$},data(){return{searchKeyword:"",isLogin:!1,userInfo:null}},mounted(){this.checkLoginStatus()},methods:{checkLoginStatus(){const e=localStorage.getItem("token"),o=localStorage.getItem("userInfo");e&&o&&(this.isLogin=!0,this.userInfo=JSON.parse(o))},handleCommand(e){switch(e){case"info":this.$router.push("/user/info");break;case"products":this.$router.push("/user/products");break;case"trades":this.$router.push("/user/trades");break;case"create":this.$router.push("/product/create");break;case"logout":this.handleLogout();break}},handleLogout(){this.$confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("userInfo"),this.isLogin=!1,this.userInfo=null,this.$message.success("退出成功"),this.$router.push("/")}).catch(()=>{})},handleSearch(){this.searchKeyword.trim()&&this.$router.push({path:"/",query:{keyword:this.searchKeyword}})},toHome(){this.$router.push("/")},toLogin(){this.$router.push("/login")},toRegister(){this.$router.push("/register")}},watch:{$route(e,o){this.checkLoginStatus()}}};var p=t(262);const f=(0,p.A)(m,[["render",h],["__scopeId","data-v-6ab841fe"]]),g=f}}]);
//# sourceMappingURL=976.f7b1a5b5.js.map
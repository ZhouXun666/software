"use strict";(self["webpackChunksecondhand_frontend"]=self["webpackChunksecondhand_frontend"]||[]).push([[231],{231:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var s=t(641);const o={class:"login-container"};function a(e,r,t,a,l,d){const n=(0,s.g2)("el-input"),u=(0,s.g2)("el-form-item"),g=(0,s.g2)("el-button"),i=(0,s.g2)("el-form"),c=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(c,{class:"login-card"},{header:(0,s.k6)(()=>[...r[2]||(r[2]=[(0,s.Lk)("div",{class:"login-title"},[(0,s.Lk)("h2",null,"校园二手商品交易系统"),(0,s.Lk)("p",null,"用户登录")],-1)])]),default:(0,s.k6)(()=>[(0,s.bF)(i,{model:l.loginForm,rules:l.loginRules,ref:"loginFormRef","label-width":"80px"},{default:(0,s.k6)(()=>[(0,s.bF)(u,{label:"用户名",prop:"username"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:l.loginForm.username,"onUpdate:modelValue":r[0]||(r[0]=e=>l.loginForm.username=e),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),(0,s.bF)(u,{label:"密码",prop:"password"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{modelValue:l.loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>l.loginForm.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)(()=>[(0,s.bF)(g,{type:"primary",onClick:d.handleLogin,loading:l.loading,class:"login-btn"},{default:(0,s.k6)(()=>[...r[3]||(r[3]=[(0,s.eW)("登录",-1)])]),_:1},8,["onClick","loading"]),(0,s.bF)(g,{type:"text",onClick:d.goToRegister},{default:(0,s.k6)(()=>[...r[4]||(r[4]=[(0,s.eW)("去注册",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}var l=t(552);const d={name:"UserLogin",data(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}]},loading:!1}},methods:{async handleLogin(){this.$refs.loginFormRef.validate(async e=>{if(e){this.loading=!0;try{const e=await l.Eo.login(this.loginForm);localStorage.setItem("token",e.token),localStorage.setItem("userInfo",JSON.stringify(e.user)),this.$message.success("登录成功"),this.$router.push("/")}catch(r){this.$message.error(r.response?.data?.message||"登录失败，请检查用户名和密码")}finally{this.loading=!1}}})},goToRegister(){this.$router.push("/register")}}};var n=t(262);const u=(0,n.A)(d,[["render",a],["__scopeId","data-v-a6139918"]]),g=u},552:(e,r,t)=>{t.d(r,{Eo:()=>o,Rv:()=>l,a6:()=>a});var s=t(335);const o={register:e=>s.A.post("/users/register",e),login:e=>s.A.post("/users/login",e),getCurrentUser:()=>s.A.get("/users/me"),updateUser:e=>s.A.put("/users/me",e),getUsers:e=>s.A.get("/users",{params:e})},a={createProduct:e=>s.A.post("/products",e),getProducts:e=>s.A.get("/products",{params:e}),getProductById:e=>s.A.get(`/products/${e}`),updateProduct:(e,r)=>s.A.put(`/products/${e}`,r),deleteProduct:e=>s.A.delete(`/products/${e}`),getMyProducts:()=>s.A.get("/products/my"),searchProducts:e=>s.A.get("/products/search",{params:{keyword:e}})},l={applyTrade:e=>s.A.post("/trades/apply",e),acceptTrade:e=>s.A.post(`/trades/${e}/accept`),rejectTrade:e=>s.A.post(`/trades/${e}/reject`),cancelTrade:e=>s.A.post(`/trades/${e}/cancel`),completeTrade:e=>s.A.post(`/trades/${e}/complete`),getTradeById:e=>s.A.get(`/trades/${e}`),getMyBuyTrades:()=>{const e=JSON.parse(localStorage.getItem("userInfo"));return s.A.get(`/trades/buyer/${e?.id}`)},getMySellTrades:()=>{const e=JSON.parse(localStorage.getItem("userInfo"));return s.A.get(`/trades/seller/${e?.id}`)},getProductTrades:e=>s.A.get(`/trades/product/${e}`)}}}]);
//# sourceMappingURL=231.586683a6.js.map
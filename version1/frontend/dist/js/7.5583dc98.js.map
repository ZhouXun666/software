{"version":3,"file":"js/7.5583dc98.js","mappings":"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","sources":["webpack://secondhand-frontend/./src/views/ProductDetail.vue","webpack://secondhand-frontend/./src/views/ProductDetail.vue?f49c","webpack://secondhand-frontend/./src/api/index.js"],"sourcesContent":["<template>\n  <div class=\"product-detail-container\">\n    <div v-if=\"loading\" class=\"loading\">\n      <el-spinner type=\"spinner\" />\n      <p>加载中...</p>\n    </div>\n    <div v-else-if=\"product\" class=\"product-detail\">\n      <!-- 商品图片和信息 -->\n      <div class=\"product-main\">\n        <div class=\"product-images\">\n          <el-carousel :interval=\"4000\" type=\"card\" height=\"400px\" indicator-position=\"outside\">\n            <el-carousel-item v-for=\"(image, index) in getImagesArray(product.images)\" :key=\"index\">\n              <img :src=\"image\" :alt=\"product.name + '-' + (index + 1)\" />\n            </el-carousel-item>\n          </el-carousel>\n        </div>\n        <div class=\"product-info\">\n          <h1 class=\"product-title\">{{ product.name }}</h1>\n          <div class=\"product-price\">¥{{ product.price }}</div>\n          <div class=\"product-meta\">\n            <div class=\"meta-item\">\n              <span class=\"meta-label\">分类：</span>\n              <span class=\"meta-value\">{{ getCategoryName(product.categoryId) }}</span>\n            </div>\n            <div class=\"meta-item\">\n              <span class=\"meta-label\">发布时间：</span>\n              <span class=\"meta-value\">{{ formatDate(product.createTime) }}</span>\n            </div>\n            <div class=\"meta-item\">\n              <span class=\"meta-label\">浏览次数：</span>\n              <span class=\"meta-value\">{{ product.viewCount || 0 }}</span>\n            </div>\n          </div>\n          <div class=\"product-seller\">\n            <el-avatar :size=\"40\" :src=\"product.userAvatar || ''\">{{ product.username?.charAt(0) }}</el-avatar>\n            <div class=\"seller-info\">\n              <div class=\"seller-name\">{{ product.username || '用户' }}</div>\n              <el-button type=\"primary\" size=\"small\" @click=\"contactSeller\">联系卖家</el-button>\n            </div>\n          </div>\n          <div class=\"product-actions\">\n            <el-button\n              v-if=\"canBuy\"\n              type=\"primary\"\n              size=\"large\"\n              @click=\"handleTrade\"\n              :loading=\"trading\"\n              class=\"action-btn\"\n            >\n              申请交易\n            </el-button>\n            <el-button\n              v-else-if=\"isMyProduct\"\n              type=\"success\"\n              size=\"large\"\n              @click=\"editProduct\"\n              class=\"action-btn\"\n            >\n              编辑商品\n            </el-button>\n            <el-button\n              v-if=\"isMyProduct\"\n              type=\"danger\"\n              size=\"large\"\n              @click=\"deleteProduct\"\n              class=\"action-btn\"\n            >\n              删除商品\n            </el-button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 商品描述 -->\n      <el-card class=\"description-card\">\n        <template #header>\n          <div class=\"card-header\">商品描述</div>\n        </template>\n        <div class=\"product-description\">{{ product.description }}</div>\n      </el-card>\n\n      <!-- 交易记录（仅卖家可见） -->\n      <el-card v-if=\"isMyProduct\" class=\"trades-card\">\n        <template #header>\n          <div class=\"card-header\">交易记录</div>\n        </template>\n        <el-table :data=\"productTrades\" style=\"width: 100%\">\n          <el-table-column prop=\"buyerName\" label=\"买家\" width=\"120\" />\n          <el-table-column prop=\"message\" label=\"留言\" />\n          <el-table-column prop=\"statusText\" label=\"状态\" width=\"100\">\n            <template #default=\"{ row }\">\n              <el-tag :type=\"getStatusType(row.status)\">{{ row.statusText }}</el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"createTime\" label=\"申请时间\" width=\"180\" :formatter=\"formatDateTime\" />\n          <el-table-column label=\"操作\" width=\"200\" v-if=\"showActions\">\n            <template #default=\"{ row }\">\n              <el-button v-if=\"row.status === 0\" type=\"primary\" size=\"small\" @click=\"acceptTrade(row.id)\">接受</el-button>\n              <el-button v-if=\"row.status === 0\" type=\"danger\" size=\"small\" @click=\"rejectTrade(row.id)\">拒绝</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div v-if=\"productTrades.length === 0\" class=\"empty-message\">暂无交易记录</div>\n      </el-card>\n    </div>\n    <div v-else class=\"not-found\">\n      <el-empty description=\"商品不存在或已下架\" />\n      <el-button type=\"primary\" @click=\"goBack\">返回首页</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { productAPI, tradeAPI } from '../api'\n\nexport default {\n  name: 'ProductDetail',\n  data() {\n    return {\n      product: null,\n      productTrades: [],\n      loading: false,\n      trading: false,\n      currentUser: null\n    }\n  },\n  computed: {\n    canBuy() {\n      return this.currentUser && !this.isMyProduct && this.product?.status === 1\n    },\n    isMyProduct() {\n      return this.currentUser && this.product && this.product.userId === this.currentUser.id\n    },\n    showActions() {\n      return this.isMyProduct\n    }\n  },\n  mounted() {\n    this.currentUser = JSON.parse(localStorage.getItem('userInfo'))\n    this.loadProductDetail()\n  },\n  methods: {\n    async loadProductDetail() {\n      const productId = this.$route.params.id\n      this.loading = true\n      try {\n        const response = await productAPI.getProductById(productId)\n        this.product = response\n        \n        // 如果是卖家，加载交易记录\n        if (this.isMyProduct) {\n          await this.loadProductTrades()\n        }\n      } catch (error) {\n        this.$message.error('加载商品详情失败')\n        this.product = null\n      } finally {\n        this.loading = false\n      }\n    },\n    async loadProductTrades() {\n      try {\n        const response = await tradeAPI.getProductTrades(this.product.id)\n        this.productTrades = response\n      } catch (error) {\n        console.error('加载交易记录失败', error)\n      }\n    },\n    getImagesArray(images) {\n      if (!images) return ['https://via.placeholder.com/400x300?text=No+Image']\n      return typeof images === 'string' ? JSON.parse(images) : images\n    },\n    getCategoryName(categoryId) {\n      const categoryMap = {\n        '1': '电子产品',\n        '2': '图书文具',\n        '3': '服装鞋帽',\n        '4': '生活用品',\n        '5': '其他'\n      }\n      return categoryMap[categoryId] || '未分类'\n    },\n    formatDate(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`\n    },\n    formatDateTime(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\n    },\n    contactSeller() {\n      // 这里可以实现联系卖家的逻辑，比如打开聊天窗口\n      this.$message.info('请通过电话或线下方式联系卖家')\n    },\n    async handleTrade() {\n      this.$prompt('请输入交易留言（选填）', '申请交易', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPlaceholder: '请输入您的交易留言...',\n        inputPattern: /^.{0,200}$/,\n        inputErrorMessage: '留言最多200个字符'\n      }).then(async ({ value }) => {\n        this.trading = true\n        try {\n          const requestData = {\n            productId: this.product.id,\n            buyerId: this.currentUser.id,\n            message: value || ''\n          }\n          await tradeAPI.applyTrade(requestData)\n          this.$message.success('交易申请已提交，请等待卖家确认')\n          // 跳转到交易列表\n          this.$router.push('/user/trades')\n        } catch (error) {\n          this.$message.error(error.response?.data?.message || '申请交易失败')\n        } finally {\n          this.trading = false\n        }\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    editProduct() {\n      this.$router.push(`/product/update/${this.product.id}`)\n    },\n    async deleteProduct() {\n      this.$confirm('确定要删除这个商品吗？删除后不可恢复。', '删除确认', {\n        confirmButtonText: '确定删除',\n        cancelButtonText: '取消',\n        type: 'warning',\n        danger: true\n      }).then(async () => {\n        try {\n          await productAPI.deleteProduct(this.product.id)\n          this.$message.success('商品删除成功')\n          this.$router.push('/user/products')\n        } catch (error) {\n          this.$message.error('删除失败')\n        }\n      }).catch(() => {\n        // 取消删除\n      })\n    },\n    async acceptTrade(tradeId) {\n      this.$confirm('确定要接受这个交易吗？接受后商品将自动下架。', '接受交易', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'primary'\n      }).then(async () => {\n        try {\n          await tradeAPI.acceptTrade(tradeId)\n          this.$message.success('交易已接受')\n          await this.loadProductTrades()\n          // 重新加载商品信息以更新状态\n          await this.loadProductDetail()\n        } catch (error) {\n          this.$message.error('操作失败')\n        }\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    async rejectTrade(tradeId) {\n      this.$confirm('确定要拒绝这个交易吗？', '拒绝交易', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await tradeAPI.rejectTrade(tradeId)\n          this.$message.success('交易已拒绝')\n          await this.loadProductTrades()\n        } catch (error) {\n          this.$message.error('操作失败')\n        }\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    getStatusType(status) {\n      switch (status) {\n        case 0: return 'info'\n        case 1: return 'success'\n        case 2: return 'danger'\n        case 3: return 'primary'\n        case 4: return 'warning'\n        default: return 'default'\n      }\n    },\n    goBack() {\n      this.$router.push('/')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.product-detail-container {\n  padding: 0;\n}\n\n.loading,\n.not-found {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 20px;\n}\n\n.product-detail {\n  padding-bottom: 40px;\n}\n\n.product-main {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 30px;\n  margin-bottom: 30px;\n}\n\n.product-images img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.product-info {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.product-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n  line-height: 1.4;\n}\n\n.product-price {\n  font-size: 32px;\n  font-weight: bold;\n  color: #f56c6c;\n  margin: 20px 0;\n}\n\n.product-meta {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 20px;\n  background-color: #f5f7fa;\n  border-radius: 8px;\n}\n\n.meta-item {\n  display: flex;\n  gap: 10px;\n}\n\n.meta-label {\n  color: #606266;\n  font-size: 14px;\n  width: 80px;\n}\n\n.meta-value {\n  color: #303133;\n  font-size: 14px;\n  flex: 1;\n}\n\n.product-seller {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  padding: 20px;\n  background-color: #f5f7fa;\n  border-radius: 8px;\n}\n\n.seller-info {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.seller-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.product-actions {\n  display: flex;\n  gap: 15px;\n  margin-top: auto;\n}\n\n.action-btn {\n  flex: 1;\n  height: 48px;\n  font-size: 16px;\n}\n\n.description-card,\n.trades-card {\n  margin-bottom: 30px;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.product-description {\n  font-size: 16px;\n  line-height: 1.8;\n  color: #606266;\n  white-space: pre-wrap;\n}\n\n.empty-message {\n  text-align: center;\n  padding: 40px 0;\n  color: #909399;\n}\n\n@media (max-width: 768px) {\n  .product-main {\n    grid-template-columns: 1fr;\n  }\n  \n  .product-actions {\n    flex-direction: column;\n  }\n  \n  .product-title {\n    font-size: 20px;\n  }\n  \n  .product-price {\n    font-size: 28px;\n  }\n}\n</style>","import { render } from \"./ProductDetail.vue?vue&type=template&id=01dda5c8&scoped=true\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\n\nimport \"./ProductDetail.vue?vue&type=style&index=0&id=01dda5c8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01dda5c8\"]])\n\nexport default __exports__","import axios from 'axios'\n\n// 用户相关API\nexport const userAPI = {\n  // 用户注册\n  register: (data) => {\n    return axios.post('/users/register', data)\n  },\n  \n  // 用户登录\n  login: (data) => {\n    return axios.post('/users/login', data)\n  },\n  \n  // 获取当前用户信息\n  getCurrentUser: () => {\n    return axios.get('/users/me')\n  },\n  \n  // 更新用户信息\n  updateUser: (data) => {\n    return axios.put('/users/me', data)\n  },\n  \n  // 获取用户列表（管理员）\n  getUsers: (params) => {\n    return axios.get('/users', { params })\n  }\n}\n\n// 商品相关API\nexport const productAPI = {\n  // 创建商品\n  createProduct: (data) => {\n    return axios.post('/products', data)\n  },\n  \n  // 获取商品列表\n  getProducts: (params) => {\n    return axios.get('/products', { params })\n  },\n  \n  // 获取商品详情\n  getProductById: (id) => {\n    return axios.get(`/products/${id}`)\n  },\n  \n  // 更新商品\n  updateProduct: (id, data) => {\n    return axios.put(`/products/${id}`, data)\n  },\n  \n  // 删除商品\n  deleteProduct: (id) => {\n    return axios.delete(`/products/${id}`)\n  },\n  \n  // 获取我的商品\n  getMyProducts: () => {\n    return axios.get('/products/my')\n  },\n  \n  // 搜索商品\n  searchProducts: (keyword) => {\n    return axios.get('/products/search', { params: { keyword } })\n  }\n}\n\n// 交易相关API\nexport const tradeAPI = {\n  // 申请交易\n  applyTrade: (data) => {\n    return axios.post('/trades/apply', data)\n  },\n  \n  // 接受交易\n  acceptTrade: (id) => {\n    return axios.post(`/trades/${id}/accept`)\n  },\n  \n  // 拒绝交易\n  rejectTrade: (id) => {\n    return axios.post(`/trades/${id}/reject`)\n  },\n  \n  // 取消交易\n  cancelTrade: (id) => {\n    return axios.post(`/trades/${id}/cancel`)\n  },\n  \n  // 完成交易\n  completeTrade: (id) => {\n    return axios.post(`/trades/${id}/complete`)\n  },\n  \n  // 获取交易详情\n  getTradeById: (id) => {\n    return axios.get(`/trades/${id}`)\n  },\n  \n  // 获取我作为买家的交易\n  getMyBuyTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/buyer/${userInfo?.id}`)\n  },\n  \n  // 获取我作为卖家的交易\n  getMySellTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/seller/${userInfo?.id}`)\n  },\n  \n  // 获取商品的交易记录\n  getProductTrades: (productId) => {\n    return axios.get(`/trades/product/${productId}`)\n  }\n}\n\n// 上传图片API\nexport const uploadAPI = {\n  // 上传图片\n  uploadImage: (formData) => {\n    return axios.post('/upload/image', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  }\n}"],"names":["class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_createVNode","_component_el_spinner","type","_createElementVNode","product","_hoisted_3","_hoisted_4","_hoisted_5","_component_el_carousel","interval","height","_Fragment","_renderList","$options","getImagesArray","images","image","index","_createBlock","_component_el_carousel_item","key","src","alt","name","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","price","_hoisted_10","_hoisted_11","_hoisted_12","getCategoryName","categoryId","_hoisted_13","_hoisted_14","formatDate","createTime","_hoisted_15","_hoisted_16","viewCount","_hoisted_17","_component_el_avatar","size","userAvatar","username","charAt","_hoisted_18","_hoisted_19","_component_el_button","onClick","contactSeller","_cache","_hoisted_20","canBuy","handleTrade","trading","isMyProduct","editProduct","deleteProduct","_component_el_card","header","_withCtx","_hoisted_21","description","_component_el_table","data","productTrades","style","_component_el_table_column","prop","label","width","default","row","_component_el_tag","getStatusType","status","statusText","formatter","formatDateTime","showActions","$event","acceptTrade","id","rejectTrade","length","_hoisted_22","_hoisted_23","_component_el_empty","goBack","currentUser","computed","this","userId","mounted","JSON","parse","localStorage","getItem","loadProductDetail","methods","productId","$route","params","response","productAPI","getProductById","loadProductTrades","error","$message","tradeAPI","getProductTrades","console","categoryMap","dateString","date","Date","getFullYear","getMonth","toString","padStart","getDate","getHours","getMinutes","info","$prompt","confirmButtonText","cancelButtonText","inputPlaceholder","inputPattern","inputErrorMessage","then","async","value","requestData","buyerId","message","applyTrade","success","$router","push","catch","$confirm","danger","tradeId","__exports__","render","userAPI","register","axios","post","login","getCurrentUser","get","updateUser","put","getUsers","createProduct","getProducts","updateProduct","delete","getMyProducts","searchProducts","keyword","cancelTrade","completeTrade","getTradeById","getMyBuyTrades","userInfo","getMySellTrades"],"sourceRoot":""}
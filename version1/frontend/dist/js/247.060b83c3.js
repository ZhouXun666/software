"use strict";(self["webpackChunksecondhand_frontend"]=self["webpackChunksecondhand_frontend"]||[]).push([[247],{247:(e,r,s)=>{s.r(r),s.d(r,{default:()=>n});var t=s(641);const a={class:"register-container"};function o(e,r,s,o,l,d){const i=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-button"),g=(0,t.g2)("el-form"),p=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(p,{class:"register-card"},{header:(0,t.k6)(()=>[...r[6]||(r[6]=[(0,t.Lk)("div",{class:"register-title"},[(0,t.Lk)("h2",null,"校园二手商品交易系统"),(0,t.Lk)("p",null,"用户注册")],-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(g,{model:l.registerForm,rules:l.registerRules,ref:"registerFormRef","label-width":"80px"},{default:(0,t.k6)(()=>[(0,t.bF)(u,{label:"用户名",prop:"username"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.username,"onUpdate:modelValue":r[0]||(r[0]=e=>l.registerForm.username=e),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"密码",prop:"password"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>l.registerForm.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"确认密码",prop:"confirmPassword"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=e=>l.registerForm.confirmPassword=e),type:"password",placeholder:"请确认密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"姓名",prop:"name"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.name,"onUpdate:modelValue":r[3]||(r[3]=e=>l.registerForm.name=e),placeholder:"请输入真实姓名","prefix-icon":"el-icon-user-solid"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"手机号",prop:"phone"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.phone,"onUpdate:modelValue":r[4]||(r[4]=e=>l.registerForm.phone=e),placeholder:"请输入手机号","prefix-icon":"el-icon-phone"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"邮箱",prop:"email"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:l.registerForm.email,"onUpdate:modelValue":r[5]||(r[5]=e=>l.registerForm.email=e),type:"email",placeholder:"请输入邮箱","prefix-icon":"el-icon-message"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(n,{type:"primary",onClick:d.handleRegister,loading:l.loading,class:"register-btn"},{default:(0,t.k6)(()=>[...r[7]||(r[7]=[(0,t.eW)("注册",-1)])]),_:1},8,["onClick","loading"]),(0,t.bF)(n,{type:"text",onClick:d.goToLogin},{default:(0,t.k6)(()=>[...r[8]||(r[8]=[(0,t.eW)("已有账号？去登录",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}var l=s(552);const d={name:"Register",data(){return{registerForm:{username:"",password:"",confirmPassword:"",name:"",phone:"",email:""},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]},loading:!1}},methods:{validatePassword(e,r,s){r!==this.registerForm.password?s(new Error("两次输入的密码不一致")):s()},async handleRegister(){this.$refs.registerFormRef.validate(async e=>{if(e){this.loading=!0;try{const{confirmPassword:e,...r}=this.registerForm;await l.Eo.register(r),this.$message.success("注册成功，请登录"),this.$router.push("/login")}catch(r){this.$message.error(r.response?.data?.message||"注册失败，请重试")}finally{this.loading=!1}}})},goToLogin(){this.$router.push("/login")}}};var i=s(262);const u=(0,i.A)(d,[["render",o],["__scopeId","data-v-ba68d2d6"]]),n=u},552:(e,r,s)=>{s.d(r,{Eo:()=>a,Rv:()=>l,a6:()=>o});var t=s(335);const a={register:e=>t.A.post("/users/register",e),login:e=>t.A.post("/users/login",e),getCurrentUser:()=>t.A.get("/users/me"),updateUser:e=>t.A.put("/users/me",e),getUsers:e=>t.A.get("/users",{params:e})},o={createProduct:e=>t.A.post("/products",e),getProducts:e=>t.A.get("/products",{params:e}),getProductById:e=>t.A.get(`/products/${e}`),updateProduct:(e,r)=>t.A.put(`/products/${e}`,r),deleteProduct:e=>t.A.delete(`/products/${e}`),getMyProducts:()=>t.A.get("/products/my"),searchProducts:e=>t.A.get("/products/search",{params:{keyword:e}})},l={applyTrade:e=>t.A.post("/trades/apply",e),acceptTrade:e=>t.A.post(`/trades/${e}/accept`),rejectTrade:e=>t.A.post(`/trades/${e}/reject`),cancelTrade:e=>t.A.post(`/trades/${e}/cancel`),completeTrade:e=>t.A.post(`/trades/${e}/complete`),getTradeById:e=>t.A.get(`/trades/${e}`),getMyBuyTrades:()=>{const e=JSON.parse(localStorage.getItem("userInfo"));return t.A.get(`/trades/buyer/${e?.id}`)},getMySellTrades:()=>{const e=JSON.parse(localStorage.getItem("userInfo"));return t.A.get(`/trades/seller/${e?.id}`)},getProductTrades:e=>t.A.get(`/trades/product/${e}`)}}}]);
//# sourceMappingURL=247.060b83c3.js.map
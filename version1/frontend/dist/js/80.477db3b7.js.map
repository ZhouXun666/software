{"version":3,"file":"js/80.477db3b7.js","mappings":"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","sources":["webpack://secondhand-frontend/./src/views/UserUpdate.vue","webpack://secondhand-frontend/./src/views/UserUpdate.vue?2e1c","webpack://secondhand-frontend/./src/api/index.js"],"sourcesContent":["<template>\n  <div class=\"user-update-container\">\n    <el-card class=\"update-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>编辑个人信息</span>\n        </div>\n      </template>\n      \n      <el-form :model=\"userForm\" :rules=\"userRules\" ref=\"userFormRef\" label-width=\"100px\" class=\"update-form\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"userForm.username\" disabled placeholder=\"用户名不可修改\" />\n        </el-form-item>\n        \n        <el-form-item label=\"昵称\" prop=\"nickname\">\n          <el-input v-model=\"userForm.nickname\" placeholder=\"请输入昵称\" maxlength=\"50\" show-word-limit />\n        </el-form-item>\n        \n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"userForm.gender\">\n            <el-radio label=\"1\">男</el-radio>\n            <el-radio label=\"2\">女</el-radio>\n            <el-radio label=\"0\">保密</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        \n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"userForm.email\" type=\"email\" placeholder=\"请输入邮箱\" maxlength=\"100\" show-word-limit />\n        </el-form-item>\n        \n        <el-form-item label=\"手机号码\" prop=\"phone\">\n          <el-input v-model=\"userForm.phone\" placeholder=\"请输入手机号码\" maxlength=\"20\" show-word-limit />\n        </el-form-item>\n        \n        <el-form-item label=\"个性签名\" prop=\"bio\">\n          <el-input\n            v-model=\"userForm.bio\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请输入个性签名\"\n            maxlength=\"200\"\n            show-word-limit\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"submitting\">保存修改</el-button>\n          <el-button @click=\"resetForm\">重置</el-button>\n          <el-button @click=\"goBack\">返回</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { userAPI } from '../api'\n\nexport default {\n  name: 'UserUpdate',\n  data() {\n    return {\n      userForm: {\n        username: '',\n        nickname: '',\n        gender: '0',\n        email: '',\n        phone: '',\n        bio: ''\n      },\n      userRules: {\n        nickname: [\n          { required: false, max: 50, message: '昵称不能超过50个字符', trigger: 'blur' }\n        ],\n        email: [\n          { required: false, type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\n        ],\n        phone: [\n          { required: false, pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\n        ],\n        bio: [\n          { required: false, max: 200, message: '个性签名不能超过200个字符', trigger: 'blur' }\n        ]\n      },\n      submitting: false\n    }\n  },\n  mounted() {\n    this.loadUserInfo()\n  },\n  methods: {\n    async loadUserInfo() {\n      try {\n        const response = await userAPI.getUserInfo()\n        this.userForm = {\n          username: response.username,\n          nickname: response.nickname || '',\n          gender: response.gender?.toString() || '0',\n          email: response.email || '',\n          phone: response.phone || '',\n          bio: response.bio || ''\n        }\n      } catch (error) {\n        this.$message.error('加载用户信息失败')\n      }\n    },\n    async submitForm() {\n      this.$refs.userFormRef.validate(async (valid) => {\n        if (valid) {\n          this.submitting = true\n          try {\n            await userAPI.updateUserInfo(this.userForm)\n            this.$message.success('个人信息更新成功')\n            this.$router.push('/user/info')\n          } catch (error) {\n            this.$message.error('更新失败，请重试')\n          } finally {\n            this.submitting = false\n          }\n        }\n      })\n    },\n    resetForm() {\n      this.$refs.userFormRef.resetFields()\n    },\n    goBack() {\n      this.$router.go(-1)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-update-container {\n  padding: 0;\n}\n\n.update-card {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.update-form {\n  padding-top: 20px;\n}\n\n@media (max-width: 768px) {\n  .update-card {\n    max-width: 100%;\n  }\n  \n  .el-form {\n    label-width: 80px;\n  }\n}\n</style>","import { render } from \"./UserUpdate.vue?vue&type=template&id=2681824a&scoped=true\"\nimport script from \"./UserUpdate.vue?vue&type=script&lang=js\"\nexport * from \"./UserUpdate.vue?vue&type=script&lang=js\"\n\nimport \"./UserUpdate.vue?vue&type=style&index=0&id=2681824a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2681824a\"]])\n\nexport default __exports__","import axios from 'axios'\n\n// 用户相关API\nexport const userAPI = {\n  // 用户注册\n  register: (data) => {\n    return axios.post('/users/register', data)\n  },\n  \n  // 用户登录\n  login: (data) => {\n    return axios.post('/users/login', data)\n  },\n  \n  // 获取当前用户信息\n  getCurrentUser: () => {\n    return axios.get('/users/me')\n  },\n  \n  // 更新用户信息\n  updateUser: (data) => {\n    return axios.put('/users/me', data)\n  },\n  \n  // 获取用户列表（管理员）\n  getUsers: (params) => {\n    return axios.get('/users', { params })\n  }\n}\n\n// 商品相关API\nexport const productAPI = {\n  // 创建商品\n  createProduct: (data) => {\n    return axios.post('/products', data)\n  },\n  \n  // 获取商品列表\n  getProducts: (params) => {\n    return axios.get('/products', { params })\n  },\n  \n  // 获取商品详情\n  getProductById: (id) => {\n    return axios.get(`/products/${id}`)\n  },\n  \n  // 更新商品\n  updateProduct: (id, data) => {\n    return axios.put(`/products/${id}`, data)\n  },\n  \n  // 删除商品\n  deleteProduct: (id) => {\n    return axios.delete(`/products/${id}`)\n  },\n  \n  // 获取我的商品\n  getMyProducts: () => {\n    return axios.get('/products/my')\n  },\n  \n  // 搜索商品\n  searchProducts: (keyword) => {\n    return axios.get('/products/search', { params: { keyword } })\n  }\n}\n\n// 交易相关API\nexport const tradeAPI = {\n  // 申请交易\n  applyTrade: (data) => {\n    return axios.post('/trades/apply', data)\n  },\n  \n  // 接受交易\n  acceptTrade: (id) => {\n    return axios.post(`/trades/${id}/accept`)\n  },\n  \n  // 拒绝交易\n  rejectTrade: (id) => {\n    return axios.post(`/trades/${id}/reject`)\n  },\n  \n  // 取消交易\n  cancelTrade: (id) => {\n    return axios.post(`/trades/${id}/cancel`)\n  },\n  \n  // 完成交易\n  completeTrade: (id) => {\n    return axios.post(`/trades/${id}/complete`)\n  },\n  \n  // 获取交易详情\n  getTradeById: (id) => {\n    return axios.get(`/trades/${id}`)\n  },\n  \n  // 获取我作为买家的交易\n  getMyBuyTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/buyer/${userInfo?.id}`)\n  },\n  \n  // 获取我作为卖家的交易\n  getMySellTrades: () => {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'))\n    return axios.get(`/trades/seller/${userInfo?.id}`)\n  },\n  \n  // 获取商品的交易记录\n  getProductTrades: (productId) => {\n    return axios.get(`/trades/product/${productId}`)\n  }\n}\n\n// 上传图片API\nexport const uploadAPI = {\n  // 上传图片\n  uploadImage: (formData) => {\n    return axios.post('/upload/image', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n  }\n}"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","_component_el_form","model","$data","userForm","rules","userRules","ref","_component_el_form_item","label","prop","_component_el_input","username","$event","disabled","placeholder","nickname","maxlength","_component_el_radio_group","gender","_component_el_radio","email","type","phone","bio","rows","_component_el_button","onClick","$options","submitForm","loading","submitting","resetForm","goBack","name","data","required","max","message","trigger","pattern","mounted","this","loadUserInfo","methods","response","userAPI","getUserInfo","toString","error","$message","$refs","userFormRef","validate","async","valid","updateUserInfo","success","$router","push","resetFields","go","__exports__","render","register","axios","post","login","getCurrentUser","get","updateUser","put","getUsers","params","productAPI","createProduct","getProducts","getProductById","id","updateProduct","deleteProduct","delete","getMyProducts","searchProducts","keyword","tradeAPI","applyTrade","acceptTrade","rejectTrade","cancelTrade","completeTrade","getTradeById","getMyBuyTrades","userInfo","JSON","parse","localStorage","getItem","getMySellTrades","getProductTrades","productId"],"sourceRoot":""}
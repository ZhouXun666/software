{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\n\n// 导入页面组件\nconst Login = () => import('../views/Login.vue');\nconst Register = () => import('../views/Register.vue');\nconst Home = () => import('../views/Home.vue');\nconst Index = () => import('../views/Index.vue');\nconst ProductDetail = () => import('../views/ProductDetail.vue');\nconst ProductCreate = () => import('../views/ProductCreate.vue');\nconst ProductUpdate = () => import('../views/ProductUpdate.vue');\nconst UserCenter = () => import('../views/UserCenter.vue');\nconst UserProducts = () => import('../views/UserProducts.vue');\nconst UserTrades = () => import('../views/UserTrades.vue');\nconst TradeDetail = () => import('../views/TradeDetail.vue');\nconst NotFound = () => import('../views/NotFound.vue');\nconst UserUpdate = () => import('../views/UserUpdate.vue');\nconst MyProducts = () => import('../views/MyProducts.vue');\nconst TradeList = () => import('../views/TradeList.vue');\nconst UserInfo = () => import('../views/UserInfo.vue');\n\n// 路由配置\nconst routes = [{\n  path: '/',\n  redirect: '/login' // 访问根路径时自动跳转到 /login\n}, {\n  path: '/login',\n  component: () => import('@/views/Login.vue') // 你的登录组件\n}, {\n  path: '/',\n  name: 'Home',\n  component: Home,\n  meta: {\n    requiresAuth: false\n  },\n  children: [{\n    path: '',\n    name: 'Index',\n    component: Index\n  }, {\n    path: 'product/:id',\n    name: 'ProductDetail',\n    component: ProductDetail\n  }]\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/user',\n  name: 'User',\n  component: Home,\n  redirect: '/user/center',\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: 'center',\n    name: 'UserCenter',\n    component: UserCenter\n  }, {\n    path: 'info',\n    name: 'UserInfo',\n    component: UserInfo\n  }, {\n    path: 'update',\n    name: 'UserUpdate',\n    component: UserUpdate\n  }, {\n    path: 'products',\n    name: 'UserProducts',\n    component: UserProducts\n  }, {\n    path: 'my-products',\n    name: 'MyProducts',\n    component: MyProducts\n  }, {\n    path: 'trades',\n    name: 'UserTrades',\n    component: UserTrades\n  }]\n}, {\n  path: '/trade-list',\n  name: 'TradeList',\n  component: Home,\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: '',\n    component: TradeList\n  }]\n}, {\n  path: '/product',\n  name: 'Product',\n  component: Home,\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: 'create',\n    name: 'ProductCreate',\n    component: ProductCreate\n  }, {\n    path: 'update/:id',\n    name: 'ProductUpdate',\n    component: ProductUpdate\n  }]\n},\n// 新增交易详情路由\n{\n  path: '/trade/detail/:id',\n  name: 'TradeDetail',\n  component: TradeDetail,\n  meta: {\n    requiresAuth: true\n  }\n},\n// 新增404页面路由\n{\n  path: '/404',\n  name: 'NotFound',\n  component: NotFound,\n  meta: {\n    requiresAuth: false\n  }\n},\n// 捕获所有未匹配的路由，重定向到404页面\n{\n  path: '/:pathMatch(.*)*',\n  redirect: '/404'\n}];\n\n// 创建路由实例\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\n// 路由守卫 - 处理登录验证\nrouter.beforeEach((to, from, next) => {\n  // 检查是否需要登录\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  const token = localStorage.getItem('token');\n  const userInfo = localStorage.getItem('userInfo');\n  // 如果需要登录且没有token，则跳转到登录页\n  if (requiresAuth && !token) {\n    next({\n      name: 'Login'\n    });\n  } else if (requiresAuth && !userInfo) {\n    // 如果有token但没有用户信息，尝试获取用户信息\n    try {\n      // 这里可以添加获取用户信息的逻辑\n      next();\n    } catch (error) {\n      localStorage.removeItem('token');\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Login","Register","Home","Index","ProductDetail","ProductCreate","ProductUpdate","UserCenter","UserProducts","UserTrades","TradeDetail","NotFound","UserUpdate","MyProducts","TradeList","UserInfo","routes","path","redirect","component","name","meta","requiresAuth","children","router","history","beforeEach","to","from","next","matched","some","record","token","localStorage","getItem","userInfo","error","removeItem"],"sources":["D:/文档/学习/专业课实验报告书/专业选修/软件工程/version1/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\n\n// 导入页面组件\nconst Login = () => import('../views/Login.vue')\nconst Register = () => import('../views/Register.vue')\nconst Home = () => import('../views/Home.vue')\nconst Index = () => import('../views/Index.vue')\nconst ProductDetail = () => import('../views/ProductDetail.vue')\nconst ProductCreate = () => import('../views/ProductCreate.vue')\nconst ProductUpdate = () => import('../views/ProductUpdate.vue')\nconst UserCenter = () => import('../views/UserCenter.vue')\nconst UserProducts = () => import('../views/UserProducts.vue')\nconst UserTrades = () => import('../views/UserTrades.vue')\nconst TradeDetail = () => import('../views/TradeDetail.vue')\nconst NotFound = () => import('../views/NotFound.vue')\nconst UserUpdate = () => import('../views/UserUpdate.vue')\nconst MyProducts = () => import('../views/MyProducts.vue')\nconst TradeList = () => import('../views/TradeList.vue')\nconst UserInfo = () => import('../views/UserInfo.vue')\n\n// 路由配置\nconst routes = [\n  {\n    path: '/',\n    redirect: '/login' // 访问根路径时自动跳转到 /login\n  },\n  {\n    path: '/login',\n    component: () => import('@/views/Login.vue') // 你的登录组件\n  },\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n    meta: { requiresAuth: false },\n    children: [\n      {\n        path: '',\n        name: 'Index',\n        component: Index\n      },\n      {\n        path: 'product/:id',\n        name: 'ProductDetail',\n        component: ProductDetail\n      }\n    ]\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: Register,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/user',\n    name: 'User',\n    component: Home,\n    redirect: '/user/center',\n    meta: { requiresAuth: true },\n    children: [\n      { path: 'center', name: 'UserCenter', component: UserCenter },\n      { path: 'info', name: 'UserInfo', component: UserInfo },\n      { path: 'update', name: 'UserUpdate', component: UserUpdate },\n      { path: 'products', name: 'UserProducts', component: UserProducts },\n      { path: 'my-products', name: 'MyProducts', component: MyProducts },\n      { path: 'trades', name: 'UserTrades', component: UserTrades }\n    ]\n  },\n  {\n    path: '/trade-list',\n    name: 'TradeList',\n    component: Home,\n    meta: { requiresAuth: true },\n    children: [\n      { path: '', component: TradeList }\n    ]\n  },\n  {\n    path: '/product',\n    name: 'Product',\n    component: Home,\n    meta: { requiresAuth: true },\n    children: [\n      {\n        path: 'create',\n        name: 'ProductCreate',\n        component: ProductCreate\n      },\n      {\n        path: 'update/:id',\n        name: 'ProductUpdate',\n        component: ProductUpdate\n      }\n    ]\n  },\n  // 新增交易详情路由\n  {\n    path: '/trade/detail/:id',\n    name: 'TradeDetail',\n    component: TradeDetail,\n    meta: { requiresAuth: true }\n  },\n  // 新增404页面路由\n  {\n    path: '/404',\n    name: 'NotFound',\n    component: NotFound,\n    meta: { requiresAuth: false }\n  },\n  // 捕获所有未匹配的路由，重定向到404页面\n  {\n    path: '/:pathMatch(.*)*',\n    redirect: '/404'\n  }\n]\n\n// 创建路由实例\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n})\n\n// 路由守卫 - 处理登录验证\nrouter.beforeEach((to, from, next) => {\n  // 检查是否需要登录\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth)\n  const token = localStorage.getItem('token')\n  const userInfo = localStorage.getItem('userInfo')\n  // 如果需要登录且没有token，则跳转到登录页\n  if (requiresAuth && !token) {\n    next({ name: 'Login' })\n  } else if (requiresAuth && !userInfo) {\n    // 如果有token但没有用户信息，尝试获取用户信息\n    try {\n      // 这里可以添加获取用户信息的逻辑\n      next()\n    } catch (error) {\n      localStorage.removeItem('token')\n\n    }\n  } else {\n    next()\n  }\n})\n\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
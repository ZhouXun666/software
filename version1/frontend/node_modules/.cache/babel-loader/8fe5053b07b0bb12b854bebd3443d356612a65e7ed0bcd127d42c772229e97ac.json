{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\n\n// 导入路由页面组件\nconst Login = () => import('../views/Login.vue');\nconst Register = () => import('../views/Register.vue');\nconst Home = () => import('../views/Home.vue');\nconst Index = () => import('../views/Index.vue');\nconst ProductDetail = () => import('../views/ProductDetail.vue');\nconst ProductCreate = () => import('../views/ProductCreate.vue');\nconst ProductUpdate = () => import('../views/ProductUpdate.vue');\nconst MyProducts = () => import('../views/MyProducts.vue');\nconst TradeList = () => import('../views/TradeList.vue');\nconst UserInfo = () => import('../views/UserInfo.vue');\nconst UserUpdate = () => import('../views/UserUpdate.vue');\n// 导入新页面组件\nconst UserCenter = () => import('../views/UserCenter.vue');\nconst UserProducts = () => import('../views/UserProducts.vue');\nconst UserTrades = () => import('../views/UserTrades.vue');\nconst TradeDetail = () => import('../views/TradeDetail.vue');\nconst NotFound = () => import('../views/NotFound.vue');\n\n// 路由配置\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: Home,\n  meta: {\n    requiresAuth: false\n  },\n  children: [{\n    path: '',\n    name: 'Index',\n    component: Index\n  }, {\n    path: 'product/:id',\n    name: 'ProductDetail',\n    component: ProductDetail\n  }]\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/user',\n  name: 'User',\n  component: Home,\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: 'info',\n    name: 'UserInfo',\n    component: UserInfo\n  }, {\n    path: 'update',\n    name: 'UserUpdate',\n    component: UserUpdate\n  }, {\n    path: 'products',\n    name: 'MyProducts',\n    component: MyProducts\n  }, {\n    path: 'trades',\n    name: 'TradeList',\n    component: TradeList\n  },\n  // 新增用户中心路由\n  {\n    path: 'center',\n    name: 'UserCenter',\n    component: UserCenter\n  },\n  // 新增用户产品路由\n  {\n    path: 'products',\n    name: 'UserProducts',\n    component: UserProducts\n  },\n  // 新增用户交易路由\n  {\n    path: 'trades',\n    name: 'UserTrades',\n    component: UserTrades\n  }]\n}, {\n  path: '/product',\n  name: 'Product',\n  component: Home,\n  meta: {\n    requiresAuth: true\n  },\n  children: [{\n    path: 'create',\n    name: 'ProductCreate',\n    component: ProductCreate\n  }, {\n    path: 'update/:id',\n    name: 'ProductUpdate',\n    component: ProductUpdate\n  }]\n},\n// 新增交易详情路由\n{\n  path: '/trade/detail/:id',\n  name: 'TradeDetail',\n  component: TradeDetail,\n  meta: {\n    requiresAuth: true\n  }\n},\n// 新增404页面路由\n{\n  path: '/404',\n  name: 'NotFound',\n  component: NotFound,\n  meta: {\n    requiresAuth: false\n  }\n},\n// 捕获所有未匹配的路由，重定向到404页面\n{\n  path: '/:pathMatch(.*)*',\n  redirect: '/404'\n}];\n\n// 创建路由实例\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 路由守卫 - 处理登录验证\nrouter.beforeEach((to, from, next) => {\n  // 检查是否需要登录\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  const token = localStorage.getItem('token');\n  const userInfo = localStorage.getItem('userInfo');\n\n  // 如果需要登录且没有token，则跳转到登录页\n  if (requiresAuth && !token) {\n    next({\n      name: 'Login'\n    });\n  } else if (requiresAuth && !userInfo) {\n    // 如果有token但没有用户信息，尝试获取用户信息\n    try {\n      // 这里可以添加获取用户信息的逻辑\n      next();\n    } catch (error) {\n      localStorage.removeItem('token');\n      next({\n        name: 'Login'\n      });\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Login","Register","Home","Index","ProductDetail","ProductCreate","ProductUpdate","MyProducts","TradeList","UserInfo","UserUpdate","UserCenter","UserProducts","UserTrades","TradeDetail","NotFound","routes","path","name","component","meta","requiresAuth","children","redirect","router","history","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","token","localStorage","getItem","userInfo","error","removeItem"],"sources":["D:/文档/学习/专业课实验报告书/专业选修/软件工程/version1/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\n\n// 导入路由页面组件\nconst Login = () => import('../views/Login.vue')\nconst Register = () => import('../views/Register.vue')\nconst Home = () => import('../views/Home.vue')\nconst Index = () => import('../views/Index.vue')\nconst ProductDetail = () => import('../views/ProductDetail.vue')\nconst ProductCreate = () => import('../views/ProductCreate.vue')\nconst ProductUpdate = () => import('../views/ProductUpdate.vue')\nconst MyProducts = () => import('../views/MyProducts.vue')\nconst TradeList = () => import('../views/TradeList.vue')\nconst UserInfo = () => import('../views/UserInfo.vue')\nconst UserUpdate = () => import('../views/UserUpdate.vue')\n// 导入新页面组件\nconst UserCenter = () => import('../views/UserCenter.vue')\nconst UserProducts = () => import('../views/UserProducts.vue')\nconst UserTrades = () => import('../views/UserTrades.vue')\nconst TradeDetail = () => import('../views/TradeDetail.vue')\nconst NotFound = () => import('../views/NotFound.vue')\n\n// 路由配置\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home,\n    meta: { requiresAuth: false },\n    children: [\n      {\n        path: '',\n        name: 'Index',\n        component: Index\n      },\n      {\n        path: 'product/:id',\n        name: 'ProductDetail',\n        component: ProductDetail\n      }\n    ]\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: Register,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/user',\n    name: 'User',\n    component: Home,\n    meta: { requiresAuth: true },\n    children: [\n      {\n        path: 'info',\n        name: 'UserInfo',\n        component: UserInfo\n      },\n      {\n        path: 'update',\n        name: 'UserUpdate',\n        component: UserUpdate\n      },\n      {\n        path: 'products',\n        name: 'MyProducts',\n        component: MyProducts\n      },\n      {\n        path: 'trades',\n        name: 'TradeList',\n        component: TradeList\n      },\n      // 新增用户中心路由\n      {\n        path: 'center',\n        name: 'UserCenter',\n        component: UserCenter\n      },\n      // 新增用户产品路由\n      {\n        path: 'products',\n        name: 'UserProducts',\n        component: UserProducts\n      },\n      // 新增用户交易路由\n      {\n        path: 'trades',\n        name: 'UserTrades',\n        component: UserTrades\n      }\n    ]\n  },\n  {\n    path: '/product',\n    name: 'Product',\n    component: Home,\n    meta: { requiresAuth: true },\n    children: [\n      {\n        path: 'create',\n        name: 'ProductCreate',\n        component: ProductCreate\n      },\n      {\n        path: 'update/:id',\n        name: 'ProductUpdate',\n        component: ProductUpdate\n      }\n    ]\n  },\n  // 新增交易详情路由\n  {\n    path: '/trade/detail/:id',\n    name: 'TradeDetail',\n    component: TradeDetail,\n    meta: { requiresAuth: true }\n  },\n  // 新增404页面路由\n  {\n    path: '/404',\n    name: 'NotFound',\n    component: NotFound,\n    meta: { requiresAuth: false }\n  },\n  // 捕获所有未匹配的路由，重定向到404页面\n  {\n    path: '/:pathMatch(.*)*',\n    redirect: '/404'\n  }\n]\n\n// 创建路由实例\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\n// 路由守卫 - 处理登录验证\nrouter.beforeEach((to, from, next) => {\n  // 检查是否需要登录\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth)\n  const token = localStorage.getItem('token')\n  const userInfo = localStorage.getItem('userInfo')\n\n  // 如果需要登录且没有token，则跳转到登录页\n  if (requiresAuth && !token) {\n    next({ name: 'Login' })\n  } else if (requiresAuth && !userInfo) {\n    // 如果有token但没有用户信息，尝试获取用户信息\n    try {\n      // 这里可以添加获取用户信息的逻辑\n      next()\n    } catch (error) {\n      localStorage.removeItem('token')\n      next({ name: 'Login' })\n    }\n  } else {\n    next()\n  }\n})\n\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
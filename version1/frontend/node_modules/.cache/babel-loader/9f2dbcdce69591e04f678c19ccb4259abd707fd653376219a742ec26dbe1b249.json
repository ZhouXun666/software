{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"trade-detail-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_3 = {\n  class: \"card-header\"\n};\nconst _hoisted_4 = {\n  class: \"status-overview\"\n};\nconst _hoisted_5 = {\n  class: \"detail-content\"\n};\nconst _hoisted_6 = {\n  class: \"product-info\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"product-details\"\n};\nconst _hoisted_9 = {\n  class: \"product-name\"\n};\nconst _hoisted_10 = {\n  class: \"product-price\"\n};\nconst _hoisted_11 = {\n  class: \"product-category\"\n};\nconst _hoisted_12 = {\n  class: \"product-description\"\n};\nconst _hoisted_13 = {\n  class: \"trade-parties\"\n};\nconst _hoisted_14 = {\n  class: \"parties-info\"\n};\nconst _hoisted_15 = {\n  class: \"party-item\"\n};\nconst _hoisted_16 = {\n  class: \"party-content\"\n};\nconst _hoisted_17 = {\n  class: \"party-details\"\n};\nconst _hoisted_18 = {\n  class: \"party-name\"\n};\nconst _hoisted_19 = {\n  class: \"party-contact\"\n};\nconst _hoisted_20 = {\n  class: \"party-item\"\n};\nconst _hoisted_21 = {\n  class: \"party-content\"\n};\nconst _hoisted_22 = {\n  class: \"party-details\"\n};\nconst _hoisted_23 = {\n  class: \"party-name\"\n};\nconst _hoisted_24 = {\n  class: \"party-contact\"\n};\nconst _hoisted_25 = {\n  class: \"trade-info\"\n};\nconst _hoisted_26 = {\n  class: \"info-row\"\n};\nconst _hoisted_27 = {\n  class: \"info-value\"\n};\nconst _hoisted_28 = {\n  class: \"info-row\"\n};\nconst _hoisted_29 = {\n  class: \"info-value\"\n};\nconst _hoisted_30 = {\n  class: \"info-row\"\n};\nconst _hoisted_31 = {\n  class: \"info-value\"\n};\nconst _hoisted_32 = {\n  key: 0,\n  class: \"info-row\"\n};\nconst _hoisted_33 = {\n  class: \"info-value\"\n};\nconst _hoisted_34 = {\n  key: 1,\n  class: \"info-row\"\n};\nconst _hoisted_35 = {\n  class: \"info-value\"\n};\nconst _hoisted_36 = {\n  key: 2,\n  class: \"info-row\"\n};\nconst _hoisted_37 = {\n  class: \"info-value\"\n};\nconst _hoisted_38 = {\n  key: 3,\n  class: \"info-row\"\n};\nconst _hoisted_39 = {\n  class: \"info-value\"\n};\nconst _hoisted_40 = {\n  class: \"messages-section\"\n};\nconst _hoisted_41 = {\n  key: 0,\n  class: \"messages-list\"\n};\nconst _hoisted_42 = {\n  class: \"message-header\"\n};\nconst _hoisted_43 = {\n  class: \"message-sender\"\n};\nconst _hoisted_44 = {\n  class: \"message-time\"\n};\nconst _hoisted_45 = {\n  class: \"message-content\"\n};\nconst _hoisted_46 = {\n  key: 1,\n  class: \"no-messages\"\n};\nconst _hoisted_47 = {\n  key: 0,\n  class: \"action-buttons\"\n};\nconst _hoisted_48 = {\n  key: 2,\n  class: \"not-found\"\n};\nconst _hoisted_49 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_spinner = _resolveComponent(\"el-spinner\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_step = _resolveComponent(\"el-step\");\n  const _component_el_steps = _resolveComponent(\"el-steps\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_el_spinner, {\n    type: \"spinner\"\n  }), _cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"加载中...\", -1 /* CACHED */))])) : $data.trade ? (_openBlock(), _createBlock(_component_el_card, {\n    key: 1,\n    class: \"detail-card\"\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"交易详情\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"small\",\n      onClick: $options.goBack,\n      class: \"back-btn\"\n    }, {\n      default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\" 返回列表 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_steps, {\n      active: $options.tradeStatusStep,\n      \"finish-status\": \"success\",\n      \"align-center\": \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_step, {\n        title: \"交易申请\",\n        description: \"买家发起交易申请\"\n      }), _createVNode(_component_el_step, {\n        title: \"卖家确认\",\n        description: \"卖家接受或拒绝交易\"\n      }), _createVNode(_component_el_step, {\n        title: \"交易完成\",\n        description: \"买家确认收货\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"active\"]), _createVNode(_component_el_tag, {\n      type: $options.getStatusType($data.trade.status),\n      class: \"status-tag\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($options.getStatusText($data.trade.status)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"type\"])]), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" 商品信息 \"), _createVNode(_component_el_card, {\n      class: \"info-section\"\n    }, {\n      header: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n        class: \"section-header\"\n      }, [_createElementVNode(\"span\", null, \"商品信息\")], -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n        src: $options.getProductImage($data.trade.productImages),\n        class: \"product-image\"\n      }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h3\", _hoisted_9, _toDisplayString($data.trade.productName), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, \"¥\" + _toDisplayString($data.trade.productPrice), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, \"分类：\" + _toDisplayString($options.getCategoryName($data.trade.productCategory)), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, _toDisplayString($data.trade.product.description), 1 /* TEXT */)])])]),\n      _: 1 /* STABLE */\n    }), _createCommentVNode(\" 交易方信息 \"), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_el_card, {\n      class: \"info-section\"\n    }, {\n      header: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createElementVNode(\"div\", {\n        class: \"section-header\"\n      }, [_createElementVNode(\"span\", null, \"交易方信息\")], -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n        class: \"party-label\"\n      }, \"买家\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_16, [_createVNode(_component_el_avatar, {\n        size: 40,\n        src: $data.buyerInfo.avatar || _ctx.defaultAvatar\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($options.getUserInitial($data.buyerInfo.username)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, _toDisplayString($data.buyerInfo.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_19, \"联系方式：\" + _toDisplayString($data.buyerInfo.contact || '未提供'), 1 /* TEXT */)])])]), _createElementVNode(\"div\", _hoisted_20, [_cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n        class: \"party-label\"\n      }, \"卖家\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_21, [_createVNode(_component_el_avatar, {\n        size: 40,\n        src: $data.sellerInfo.avatar || _ctx.defaultAvatar\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($options.getUserInitial($data.sellerInfo.username)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, _toDisplayString($data.sellerInfo.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_24, \"联系方式：\" + _toDisplayString($data.sellerInfo.contact || '未提供'), 1 /* TEXT */)])])])])]),\n      _: 1 /* STABLE */\n    })]), _createCommentVNode(\" 交易信息 \"), _createVNode(_component_el_card, {\n      class: \"info-section\"\n    }, {\n      header: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createElementVNode(\"div\", {\n        class: \"section-header\"\n      }, [_createElementVNode(\"span\", null, \"交易信息\")], -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"交易ID：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_27, _toDisplayString($data.trade.id), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_28, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"创建时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_29, _toDisplayString($options.formatDate($data.trade.createdTime)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_30, [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"更新时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_31, _toDisplayString($options.formatDate($data.trade.updatedTime)), 1 /* TEXT */)]), $data.trade.status === 1 || $data.trade.status === 3 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [_cache[14] || (_cache[14] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"接受时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_33, _toDisplayString($options.formatDate($data.trade.acceptTime)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.trade.status === 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_cache[15] || (_cache[15] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"拒绝时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_35, _toDisplayString($options.formatDate($data.trade.rejectTime)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.trade.status === 3 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [_cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"完成时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_37, _toDisplayString($options.formatDate($data.trade.completeTime)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.trade.status === 4 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_38, [_cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n        class: \"info-label\"\n      }, \"取消时间：\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_39, _toDisplayString($options.formatDate($data.trade.cancelTime)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])]),\n      _: 1 /* STABLE */\n    }), _createCommentVNode(\" 交易留言 \"), _createVNode(_component_el_card, {\n      class: \"info-section\"\n    }, {\n      header: _withCtx(() => [...(_cache[18] || (_cache[18] = [_createElementVNode(\"div\", {\n        class: \"section-header\"\n      }, [_createElementVNode(\"span\", null, \"交易留言\")], -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_40, [$data.tradeMessages.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tradeMessages, message => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: message.id,\n          class: \"message-item\"\n        }, [_createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"div\", _hoisted_43, _toDisplayString(message.sender === 'buyer' ? '买家' : '卖家'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_44, _toDisplayString($options.formatDate(message.createdTime)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_45, _toDisplayString(message.content), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_46, \"暂无交易留言\")), $options.canSendMessage ? (_openBlock(), _createBlock(_component_el_form, {\n        key: 2,\n        model: $data.messageForm,\n        rules: $data.messageRules,\n        ref: \"messageFormRef\",\n        class: \"message-form\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          prop: \"content\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: $data.messageForm.content,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.messageForm.content = $event),\n            type: \"textarea\",\n            rows: 3,\n            placeholder: \"输入留言内容\",\n            maxlength: \"500\",\n            \"show-word-limit\": \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [_createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: $options.sendMessage,\n            loading: $data.sendingMessage\n          }, {\n            default: _withCtx(() => [...(_cache[19] || (_cache[19] = [_createTextVNode(\"发送留言\", -1 /* CACHED */)]))]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"onClick\", \"loading\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model\", \"rules\"])) : _createCommentVNode(\"v-if\", true)])]),\n      _: 1 /* STABLE */\n    }), _createCommentVNode(\" 操作按钮 \"), $options.actionButtons.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.actionButtons, button => {\n      return _openBlock(), _createBlock(_component_el_button, {\n        key: button.key,\n        type: button.type,\n        size: button.size || 'large',\n        loading: button.key === 'sending' && $data.sendingAction,\n        onClick: $event => $options.handleAction(button.action),\n        class: _normalizeClass(button.class)\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(button.text), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\", \"size\", \"loading\", \"onClick\", \"class\"]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)])]),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createElementBlock(\"div\", _hoisted_48, [_createVNode(_component_el_empty, {\n    description: \"交易不存在或已删除\"\n  }), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.goBack\n  }, {\n    default: _withCtx(() => [...(_cache[20] || (_cache[20] = [_createTextVNode(\"返回\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])), _createCommentVNode(\" 确认对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $data.confirmDialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.confirmDialogVisible = $event),\n    title: $data.confirmDialogTitle,\n    width: \"30%\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_49, [_createVNode(_component_el_button, {\n      onClick: _cache[1] || (_cache[1] = $event => $data.confirmDialogVisible = false)\n    }, {\n      default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), $data.actionType === 'cancel' || $data.actionType === 'reject' ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"danger\",\n      onClick: $options.confirmAction\n    }, {\n      default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"确认\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : (_openBlock(), _createBlock(_component_el_button, {\n      key: 1,\n      type: \"success\",\n      onClick: $options.confirmAction\n    }, {\n      default: _withCtx(() => [...(_cache[23] || (_cache[23] = [_createTextVNode(\"确认\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]))])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", null, _toDisplayString($data.confirmDialogContent), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_createVNode","_component_el_spinner","type","_createElementVNode","trade","_createBlock","_component_el_card","header","_withCtx","_hoisted_3","_component_el_button","size","onClick","$options","goBack","_cache","_hoisted_4","_component_el_steps","active","tradeStatusStep","_component_el_step","title","description","_component_el_tag","getStatusType","status","getStatusText","_hoisted_5","_createCommentVNode","_hoisted_6","src","getProductImage","productImages","_hoisted_8","_hoisted_9","_toDisplayString","productName","_hoisted_10","productPrice","_hoisted_11","getCategoryName","productCategory","_hoisted_12","product","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_component_el_avatar","buyerInfo","avatar","_ctx","defaultAvatar","getUserInitial","username","_hoisted_17","_hoisted_18","_hoisted_19","contact","_hoisted_20","_hoisted_21","sellerInfo","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","id","_hoisted_28","_hoisted_29","formatDate","createdTime","_hoisted_30","_hoisted_31","updatedTime","_hoisted_32","_hoisted_33","acceptTime","_hoisted_34","_hoisted_35","rejectTime","_hoisted_36","_hoisted_37","completeTime","_hoisted_38","_hoisted_39","cancelTime","_hoisted_40","tradeMessages","length","_hoisted_41","_Fragment","_renderList","message","key","_hoisted_42","_hoisted_43","sender","_hoisted_44","_hoisted_45","content","_hoisted_46","canSendMessage","_component_el_form","model","messageForm","rules","messageRules","ref","_component_el_form_item","prop","_component_el_input","$event","rows","placeholder","maxlength","sendMessage","sendingMessage","actionButtons","_hoisted_47","button","sendingAction","handleAction","action","_normalizeClass","text","_hoisted_48","_component_el_empty","_component_el_dialog","confirmDialogVisible","confirmDialogTitle","width","footer","_hoisted_49","actionType","confirmAction","confirmDialogContent"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\TradeDetail.vue"],"sourcesContent":["<template>\n  <div class=\"trade-detail-container\">\n    <div v-if=\"loading\" class=\"loading\">\n      <el-spinner type=\"spinner\" />\n      <p>加载中...</p>\n    </div>\n    <el-card v-else-if=\"trade\" class=\"detail-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>交易详情</span>\n          <el-button type=\"primary\" size=\"small\" @click=\"goBack\" class=\"back-btn\">\n            返回列表\n          </el-button>\n        </div>\n      </template>\n      \n      <!-- 交易状态概览 -->\n      <div class=\"status-overview\">\n        <el-steps :active=\"tradeStatusStep\" finish-status=\"success\" align-center>\n          <el-step title=\"交易申请\" description=\"买家发起交易申请\" />\n          <el-step title=\"卖家确认\" description=\"卖家接受或拒绝交易\" />\n          <el-step title=\"交易完成\" description=\"买家确认收货\" />\n        </el-steps>\n        <el-tag :type=\"getStatusType(trade.status)\" class=\"status-tag\">\n          {{ getStatusText(trade.status) }}\n        </el-tag>\n      </div>\n      \n      <div class=\"detail-content\">\n        <!-- 商品信息 -->\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>商品信息</span>\n            </div>\n          </template>\n          <div class=\"product-info\">\n            <img :src=\"getProductImage(trade.productImages)\" class=\"product-image\" />\n            <div class=\"product-details\">\n              <h3 class=\"product-name\">{{ trade.productName }}</h3>\n              <p class=\"product-price\">¥{{ trade.productPrice }}</p>\n              <p class=\"product-category\">分类：{{ getCategoryName(trade.productCategory) }}</p>\n              <p class=\"product-description\">{{ trade.product.description }}</p>\n            </div>\n          </div>\n        </el-card>\n        \n        <!-- 交易方信息 -->\n        <div class=\"trade-parties\">\n          <el-card class=\"info-section\">\n            <template #header>\n              <div class=\"section-header\">\n                <span>交易方信息</span>\n              </div>\n            </template>\n            <div class=\"parties-info\">\n              <div class=\"party-item\">\n                <div class=\"party-label\">买家</div>\n                <div class=\"party-content\">\n                  <el-avatar :size=\"40\" :src=\"buyerInfo.avatar || defaultAvatar\">\n                    {{ getUserInitial(buyerInfo.username) }}\n                  </el-avatar>\n                  <div class=\"party-details\">\n                    <div class=\"party-name\">{{ buyerInfo.username }}</div>\n                    <div class=\"party-contact\">联系方式：{{ buyerInfo.contact || '未提供' }}</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"party-item\">\n                <div class=\"party-label\">卖家</div>\n                <div class=\"party-content\">\n                  <el-avatar :size=\"40\" :src=\"sellerInfo.avatar || defaultAvatar\">\n                    {{ getUserInitial(sellerInfo.username) }}\n                  </el-avatar>\n                  <div class=\"party-details\">\n                    <div class=\"party-name\">{{ sellerInfo.username }}</div>\n                    <div class=\"party-contact\">联系方式：{{ sellerInfo.contact || '未提供' }}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </div>\n        \n        <!-- 交易信息 -->\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>交易信息</span>\n            </div>\n          </template>\n          <div class=\"trade-info\">\n            <div class=\"info-row\">\n              <div class=\"info-label\">交易ID：</div>\n              <div class=\"info-value\">{{ trade.id }}</div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-label\">创建时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.createdTime) }}</div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-label\">更新时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.updatedTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 1 || trade.status === 3\" class=\"info-row\">\n              <div class=\"info-label\">接受时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.acceptTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 2\" class=\"info-row\">\n              <div class=\"info-label\">拒绝时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.rejectTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 3\" class=\"info-row\">\n              <div class=\"info-label\">完成时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.completeTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 4\" class=\"info-row\">\n              <div class=\"info-label\">取消时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.cancelTime) }}</div>\n            </div>\n          </div>\n        </el-card>\n        \n        <!-- 交易留言 -->\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>交易留言</span>\n            </div>\n          </template>\n          <div class=\"messages-section\">\n            <div v-if=\"tradeMessages.length > 0\" class=\"messages-list\">\n              <div v-for=\"message in tradeMessages\" :key=\"message.id\" class=\"message-item\">\n                <div class=\"message-header\">\n                  <div class=\"message-sender\">{{ message.sender === 'buyer' ? '买家' : '卖家' }}</div>\n                  <div class=\"message-time\">{{ formatDate(message.createdTime) }}</div>\n                </div>\n                <div class=\"message-content\">{{ message.content }}</div>\n              </div>\n            </div>\n            <div v-else class=\"no-messages\">暂无交易留言</div>\n            \n            <el-form v-if=\"canSendMessage\" :model=\"messageForm\" :rules=\"messageRules\" ref=\"messageFormRef\" class=\"message-form\">\n              <el-form-item prop=\"content\">\n                <el-input\n                  v-model=\"messageForm.content\"\n                  type=\"textarea\"\n                  :rows=\"3\"\n                  placeholder=\"输入留言内容\"\n                  maxlength=\"500\"\n                  show-word-limit\n                />\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" @click=\"sendMessage\" :loading=\"sendingMessage\">发送留言</el-button>\n              </el-form-item>\n            </el-form>\n          </div>\n        </el-card>\n        \n        <!-- 操作按钮 -->\n        <div v-if=\"actionButtons.length > 0\" class=\"action-buttons\">\n          <el-button\n            v-for=\"button in actionButtons\"\n            :key=\"button.key\"\n            :type=\"button.type\"\n            :size=\"button.size || 'large'\"\n            :loading=\"button.key === 'sending' && sendingAction\"\n            @click=\"handleAction(button.action)\"\n            :class=\"button.class\"\n          >\n            {{ button.text }}\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n    <div v-else class=\"not-found\">\n      <el-empty description=\"交易不存在或已删除\" />\n      <el-button type=\"primary\" @click=\"goBack\">返回</el-button>\n    </div>\n    \n    <!-- 确认对话框 -->\n    <el-dialog v-model=\"confirmDialogVisible\" :title=\"confirmDialogTitle\" width=\"30%\">\n      <div>{{ confirmDialogContent }}</div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"confirmDialogVisible = false\">取消</el-button>\n          <el-button type=\"danger\" @click=\"confirmAction\" v-if=\"actionType === 'cancel' || actionType === 'reject'\">确认</el-button>\n          <el-button type=\"success\" @click=\"confirmAction\" v-else>确认</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { tradeAPI } from '../api'\n\nexport default {\n  name: 'TradeDetail',\n  data() {\n    return {\n      trade: null,\n      loading: false,\n      buyerInfo: {},\n      sellerInfo: {},\n      tradeMessages: [],\n      // defaultAvatar: 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png',\n      messageForm: {\n        content: ''\n      },\n      messageRules: {\n        content: [\n          { required: true, message: '请输入留言内容', trigger: 'blur' },\n          { max: 500, message: '留言内容不能超过500个字符', trigger: 'blur' }\n        ]\n      },\n      sendingMessage: false,\n      sendingAction: false,\n      confirmDialogVisible: false,\n      confirmDialogTitle: '',\n      confirmDialogContent: '',\n      actionType: ''\n    }\n  },\n  computed: {\n    tradeStatusStep() {\n      switch (this.trade?.status) {\n        case 0: return 0\n        case 1: return 1\n        case 2: return 1 // 拒绝也是在第二步\n        case 3: return 2\n        case 4: return 1 // 取消也是在第二步\n        default: return 0\n      }\n    },\n    canSendMessage() {\n      // 只有在交易进行中（待确认、已接受）时才能发送留言\n      return this.trade && (this.trade.status === 0 || this.trade.status === 1)\n    },\n    actionButtons() {\n      if (!this.trade) return []\n      \n      const buttons = []\n      const currentUserId = JSON.parse(localStorage.getItem('userInfo'))?.id\n      \n      // 买家操作\n      if (currentUserId === this.trade.buyerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'cancel',\n            text: '取消交易',\n            type: 'danger',\n            action: 'cancel'\n          })\n        }\n        if (this.trade.status === 1) {\n          buttons.push({\n            key: 'confirm',\n            text: '确认收货',\n            type: 'success',\n            action: 'confirm'\n          })\n        }\n      }\n      \n      // 卖家操作\n      if (currentUserId === this.trade.sellerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'accept',\n            text: '接受交易',\n            type: 'success',\n            class: 'mr-2',\n            action: 'accept'\n          })\n          buttons.push({\n            key: 'reject',\n            text: '拒绝交易',\n            type: 'danger',\n            action: 'reject'\n          })\n        }\n      }\n      \n      return buttons\n    }\n  },\n  mounted() {\n    this.loadTradeDetail()\n  },\n  methods: {\n    async loadTradeDetail() {\n      const tradeId = this.$route.params.id\n      this.loading = true\n      try {\n        const response = await tradeAPI.getTradeById(tradeId)\n        this.trade = response\n        \n        // 设置买家和卖家信息\n        this.buyerInfo = {\n          username: response.buyerName,\n          contact: response.buyerPhone\n          // avatar: response.buyerAvatar,\n          // contact: response.buyerContact\n        }\n        this.sellerInfo = {\n          username: response.sellerName,\n          contact: response.sellerPhone\n          // avatar: response.sellerAvatar,\n          // contact: response.sellerContact\n        }\n        \n        // 加载交易留言\n        if (response.messages) {\n          this.tradeMessages = response.messages\n        }\n      } catch (error) {\n        this.$message.error('加载交易详情失败')\n        this.trade = null\n      } finally {\n        this.loading = false\n      }\n    },\n    getProductImage(images) {\n      if (!images) return 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png'\n      const baseURL = 'http://localhost:8080/'\n      return `${baseURL}${images}`\n    },\n    getCategoryName(categoryId) {\n      const categoryMap = {\n        1: '电子产品',\n        2: '图书文具',\n        3: '服装鞋帽',\n        4: '生活用品',\n        5: '其他'\n      }\n      return categoryMap[categoryId] || '未知'\n    },\n    formatDate(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return date.toLocaleString('zh-CN')\n    },\n    getUserInitial(username) {\n      return username ? username.charAt(0).toUpperCase() : 'U'\n    },\n    getStatusType(status) {\n      const statusMap = {\n        0: 'warning', // 待确认\n        1: 'primary', // 已接受\n        2: 'info',    // 已拒绝\n        3: 'success', // 已完成\n        4: 'danger'   // 已取消\n      }\n      return statusMap[status] || 'info'\n    },\n    getStatusText(status) {\n      const statusMap = {\n        0: '待确认',\n        1: '已接受',\n        2: '已拒绝',\n        3: '已完成',\n        4: '已取消'\n      }\n      return statusMap[status] || '未知'\n    },\n    handleAction(action) {\n      this.actionType = action\n      \n      switch (action) {\n        case 'cancel':\n          this.confirmDialogTitle = '取消交易'\n          this.confirmDialogContent = '确定要取消该交易吗？'\n          break\n        case 'confirm':\n          this.confirmDialogTitle = '确认收货'\n          this.confirmDialogContent = '请确认您已收到商品，确认后交易将完成。'\n          break\n        case 'accept':\n          this.confirmDialogTitle = '接受交易'\n          this.confirmDialogContent = '确定要接受该交易申请吗？'\n          break\n        case 'reject':\n          this.confirmDialogTitle = '拒绝交易'\n          this.confirmDialogContent = '确定要拒绝该交易申请吗？'\n          break\n      }\n      \n      this.confirmDialogVisible = true\n    },\n    async confirmAction() {\n      this.confirmDialogVisible = false\n      this.sendingAction = true\n      \n      try {\n        switch (this.actionType) {\n          case 'cancel':\n            await tradeAPI.cancelTrade(this.trade.id)\n            this.$message.success('交易已取消')\n            break\n          case 'confirm':\n            await tradeAPI.confirmReceive(this.trade.id)\n            this.$message.success('已确认收货，交易完成')\n            break\n          case 'accept':\n            await tradeAPI.acceptTrade(this.trade.id)\n            this.$message.success('已接受交易')\n            break\n          case 'reject':\n            await tradeAPI.rejectTrade(this.trade.id)\n            this.$message.success('已拒绝交易')\n            break\n        }\n        // 重新加载交易详情\n        this.loadTradeDetail()\n      } catch (error) {\n        this.$message.error('操作失败，请重试')\n      } finally {\n        this.sendingAction = false\n      }\n    },\n    async sendMessage() {\n      this.$refs.messageFormRef.validate(async (valid) => {\n        if (valid) {\n          this.sendingMessage = true\n          try {\n            const response = await tradeAPI.sendMessage(this.trade.id, { content: this.messageForm.content })\n            \n            // 添加新留言到列表\n            this.tradeMessages.push(response)\n            // 清空表单\n            this.messageForm.content = ''\n            this.$refs.messageFormRef.resetFields()\n            \n            this.$message.success('留言发送成功')\n          } catch (error) {\n            this.$message.error('留言发送失败，请重试')\n          } finally {\n            this.sendingMessage = false\n          }\n        }\n      })\n    },\n    goBack() {\n      this.$router.push('/user/trades')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.trade-detail-container {\n  padding: 0;\n}\n\n.loading,\n.not-found {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 20px;\n}\n\n.detail-card {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n}\n\n/* 状态概览 */\n.status-overview {\n  position: relative;\n  padding: 30px 0;\n  margin-bottom: 30px;\n  border-bottom: 1px solid #EBEEF5;\n}\n\n.status-tag {\n  position: absolute;\n  top: 30px;\n  right: 0;\n  font-size: 16px;\n  padding: 6px 12px;\n}\n\n/* 详情内容 */\n.detail-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.info-section {\n  border-radius: 4px;\n}\n\n.section-header {\n  font-size: 16px;\n  font-weight: 500;\n  color: #303133;\n}\n\n/* 商品信息 */\n.product-info {\n  display: flex;\n  gap: 20px;\n}\n\n.product-image {\n  width: 200px;\n  height: 200px;\n  object-fit: cover;\n  border-radius: 4px;\n}\n\n.product-details {\n  flex: 1;\n}\n\n.product-name {\n  font-size: 18px;\n  font-weight: 500;\n  margin-bottom: 10px;\n}\n\n.product-price {\n  font-size: 20px;\n  font-weight: 600;\n  color: #F56C6C;\n  margin-bottom: 10px;\n}\n\n.product-category {\n  color: #606266;\n  margin-bottom: 10px;\n}\n\n.product-description {\n  color: #606266;\n  line-height: 1.6;\n  word-break: break-all;\n}\n\n/* 交易方信息 */\n.parties-info {\n  display: flex;\n  gap: 40px;\n}\n\n.party-item {\n  flex: 1;\n}\n\n.party-label {\n  font-weight: 500;\n  margin-bottom: 10px;\n  color: #303133;\n}\n\n.party-content {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.party-details {\n  flex: 1;\n}\n\n.party-name {\n  font-weight: 500;\n  margin-bottom: 5px;\n}\n\n.party-contact {\n  color: #606266;\n}\n\n/* 交易信息 */\n.trade-info {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.info-row {\n  display: flex;\n  gap: 15px;\n}\n\n.info-label {\n  width: 120px;\n  font-weight: 500;\n  color: #606266;\n}\n\n.info-value {\n  flex: 1;\n  color: #303133;\n}\n\n/* 留言区 */\n.messages-section {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.messages-list {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.message-item {\n  padding: 15px;\n  background-color: #F5F7FA;\n  border-radius: 4px;\n}\n\n.message-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n\n.message-sender {\n  font-weight: 500;\n  color: #303133;\n}\n\n.message-time {\n  color: #909399;\n  font-size: 12px;\n}\n\n.message-content {\n  color: #303133;\n  line-height: 1.6;\n}\n\n.no-messages {\n  text-align: center;\n  color: #909399;\n  padding: 30px 0;\n}\n\n.message-form {\n  margin-top: 20px;\n}\n\n/* 操作按钮 */\n.action-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 30px;\n  padding: 20px 0;\n}\n\n.mr-2 {\n  margin-right: 10px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .detail-card {\n    max-width: 100%;\n  }\n  \n  .product-info {\n    flex-direction: column;\n  }\n  \n  .product-image {\n    width: 100%;\n    height: auto;\n  }\n  \n  .parties-info {\n    flex-direction: column;\n    gap: 20px;\n  }\n  \n  .info-row {\n    flex-direction: column;\n    gap: 5px;\n  }\n  \n  .info-label {\n    width: auto;\n  }\n  \n  .status-tag {\n    position: static;\n    display: block;\n    margin-top: 20px;\n    text-align: center;\n  }\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAwB;;;EACbA,KAAK,EAAC;;;EAMjBA,KAAK,EAAC;AAAa;;EASrBA,KAAK,EAAC;AAAiB;;EAWvBA,KAAK,EAAC;AAAgB;;EAQlBA,KAAK,EAAC;AAAc;;;EAElBA,KAAK,EAAC;AAAiB;;EACtBA,KAAK,EAAC;AAAc;;EACrBA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAkB;;EACxBA,KAAK,EAAC;AAAqB;;EAM/BA,KAAK,EAAC;AAAe;;EAOjBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAY;;EAEhBA,KAAK,EAAC;AAAe;;EAInBA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAe;;EAI3BA,KAAK,EAAC;AAAY;;EAEhBA,KAAK,EAAC;AAAe;;EAInBA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAe;;EAe/BA,KAAK,EAAC;AAAY;;EAChBA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAY;;EAEpBA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAY;;EAEpBA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAY;;;EAE4BA,KAAK,EAAC;;;EAEpDA,KAAK,EAAC;AAAY;;;EAEMA,KAAK,EAAC;;;EAE9BA,KAAK,EAAC;AAAY;;;EAEMA,KAAK,EAAC;;;EAE9BA,KAAK,EAAC;AAAY;;;EAEMA,KAAK,EAAC;;;EAE9BA,KAAK,EAAC;AAAY;;EAYtBA,KAAK,EAAC;AAAkB;;;EACUA,KAAK,EAAC;;;EAElCA,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAgB;;EACtBA,KAAK,EAAC;AAAc;;EAEtBA,KAAK,EAAC;AAAiB;;;EAGpBA,KAAK,EAAC;;;;EAqBeA,KAAK,EAAC;;;;EAenCA,KAAK,EAAC;;;EASRA,KAAK,EAAC;AAAe;;;;;;;;;;;;;;uBAxLjCC,mBAAA,CA+LM,OA/LNC,UA+LM,GA9LOC,KAAA,CAAAC,OAAO,I,cAAlBH,mBAAA,CAGM,OAHNI,UAGM,GAFJC,YAAA,CAA6BC,qBAAA;IAAjBC,IAAI,EAAC;EAAS,I,0BAC1BC,mBAAA,CAAa,WAAV,QAAM,oB,KAESN,KAAA,CAAAO,KAAK,I,cAAzBC,YAAA,CAyKUC,kBAAA;;IAzKiBZ,KAAK,EAAC;;IACpBa,MAAM,EAAAC,QAAA,CACf,MAKM,CALNL,mBAAA,CAKM,OALNM,UAKM,G,0BAJJN,mBAAA,CAAiB,cAAX,MAAI,qBACVH,YAAA,CAEYU,oBAAA;MAFDR,IAAI,EAAC,SAAS;MAACS,IAAI,EAAC,OAAO;MAAEC,OAAK,EAAEC,QAAA,CAAAC,MAAM;MAAEpB,KAAK,EAAC;;wBAAW,MAExE,KAAAqB,MAAA,QAAAA,MAAA,O,iBAFwE,QAExE,mB;;;sBAKJ,MASM,CATNZ,mBAAA,CASM,OATNa,UASM,GARJhB,YAAA,CAIWiB,mBAAA;MAJAC,MAAM,EAAEL,QAAA,CAAAM,eAAe;MAAE,eAAa,EAAC,SAAS;MAAC,cAAY,EAAZ;;wBAC1D,MAA+C,CAA/CnB,YAAA,CAA+CoB,kBAAA;QAAtCC,KAAK,EAAC,MAAM;QAACC,WAAW,EAAC;UAClCtB,YAAA,CAAgDoB,kBAAA;QAAvCC,KAAK,EAAC,MAAM;QAACC,WAAW,EAAC;UAClCtB,YAAA,CAA6CoB,kBAAA;QAApCC,KAAK,EAAC,MAAM;QAACC,WAAW,EAAC;;;mCAEpCtB,YAAA,CAESuB,iBAAA;MAFArB,IAAI,EAAEW,QAAA,CAAAW,aAAa,CAAC3B,KAAA,CAAAO,KAAK,CAACqB,MAAM;MAAG/B,KAAK,EAAC;;wBAChD,MAAiC,C,kCAA9BmB,QAAA,CAAAa,aAAa,CAAC7B,KAAA,CAAAO,KAAK,CAACqB,MAAM,kB;;mCAIjCtB,mBAAA,CAkJM,OAlJNwB,UAkJM,GAjJJC,mBAAA,UAAa,EACb5B,YAAA,CAeUM,kBAAA;MAfDZ,KAAK,EAAC;IAAc;MAChBa,MAAM,EAAAC,QAAA,CACf,MAEM,KAAAO,MAAA,QAAAA,MAAA,OAFNZ,mBAAA,CAEM;QAFDT,KAAK,EAAC;MAAgB,IACzBS,mBAAA,CAAiB,cAAX,MAAI,E;wBAGd,MAQM,CARNA,mBAAA,CAQM,OARN0B,UAQM,GAPJ1B,mBAAA,CAAyE;QAAnE2B,GAAG,EAAEjB,QAAA,CAAAkB,eAAe,CAAClC,KAAA,CAAAO,KAAK,CAAC4B,aAAa;QAAGtC,KAAK,EAAC;2CACvDS,mBAAA,CAKM,OALN8B,UAKM,GAJJ9B,mBAAA,CAAqD,MAArD+B,UAAqD,EAAAC,gBAAA,CAAzBtC,KAAA,CAAAO,KAAK,CAACgC,WAAW,kBAC7CjC,mBAAA,CAAsD,KAAtDkC,WAAsD,EAA7B,GAAC,GAAAF,gBAAA,CAAGtC,KAAA,CAAAO,KAAK,CAACkC,YAAY,kBAC/CnC,mBAAA,CAA+E,KAA/EoC,WAA+E,EAAnD,KAAG,GAAAJ,gBAAA,CAAGtB,QAAA,CAAA2B,eAAe,CAAC3C,KAAA,CAAAO,KAAK,CAACqC,eAAe,mBACvEtC,mBAAA,CAAkE,KAAlEuC,WAAkE,EAAAP,gBAAA,CAAhCtC,KAAA,CAAAO,KAAK,CAACuC,OAAO,CAACrB,WAAW,iB;;QAKjEM,mBAAA,WAAc,EACdzB,mBAAA,CAkCM,OAlCNyC,WAkCM,GAjCJ5C,YAAA,CAgCUM,kBAAA;MAhCDZ,KAAK,EAAC;IAAc;MAChBa,MAAM,EAAAC,QAAA,CACf,MAEM,KAAAO,MAAA,QAAAA,MAAA,OAFNZ,mBAAA,CAEM;QAFDT,KAAK,EAAC;MAAgB,IACzBS,mBAAA,CAAkB,cAAZ,OAAK,E;wBAGf,MAyBM,CAzBNA,mBAAA,CAyBM,OAzBN0C,WAyBM,GAxBJ1C,mBAAA,CAWM,OAXN2C,WAWM,G,0BAVJ3C,mBAAA,CAAiC;QAA5BT,KAAK,EAAC;MAAa,GAAC,IAAE,qBAC3BS,mBAAA,CAQM,OARN4C,WAQM,GAPJ/C,YAAA,CAEYgD,oBAAA;QAFArC,IAAI,EAAE,EAAE;QAAGmB,GAAG,EAAEjC,KAAA,CAAAoD,SAAS,CAACC,MAAM,IAAIC,IAAA,CAAAC;;0BAC9C,MAAwC,C,kCAArCvC,QAAA,CAAAwC,cAAc,CAACxD,KAAA,CAAAoD,SAAS,CAACK,QAAQ,kB;;kCAEtCnD,mBAAA,CAGM,OAHNoD,WAGM,GAFJpD,mBAAA,CAAsD,OAAtDqD,WAAsD,EAAArB,gBAAA,CAA3BtC,KAAA,CAAAoD,SAAS,CAACK,QAAQ,kBAC7CnD,mBAAA,CAAsE,OAAtEsD,WAAsE,EAA3C,OAAK,GAAAtB,gBAAA,CAAGtC,KAAA,CAAAoD,SAAS,CAACS,OAAO,0B,OAI1DvD,mBAAA,CAWM,OAXNwD,WAWM,G,0BAVJxD,mBAAA,CAAiC;QAA5BT,KAAK,EAAC;MAAa,GAAC,IAAE,qBAC3BS,mBAAA,CAQM,OARNyD,WAQM,GAPJ5D,YAAA,CAEYgD,oBAAA;QAFArC,IAAI,EAAE,EAAE;QAAGmB,GAAG,EAAEjC,KAAA,CAAAgE,UAAU,CAACX,MAAM,IAAIC,IAAA,CAAAC;;0BAC/C,MAAyC,C,kCAAtCvC,QAAA,CAAAwC,cAAc,CAACxD,KAAA,CAAAgE,UAAU,CAACP,QAAQ,kB;;kCAEvCnD,mBAAA,CAGM,OAHN2D,WAGM,GAFJ3D,mBAAA,CAAuD,OAAvD4D,WAAuD,EAAA5B,gBAAA,CAA5BtC,KAAA,CAAAgE,UAAU,CAACP,QAAQ,kBAC9CnD,mBAAA,CAAuE,OAAvE6D,WAAuE,EAA5C,OAAK,GAAA7B,gBAAA,CAAGtC,KAAA,CAAAgE,UAAU,CAACH,OAAO,0B;;UAQjE9B,mBAAA,UAAa,EACb5B,YAAA,CAoCUM,kBAAA;MApCDZ,KAAK,EAAC;IAAc;MAChBa,MAAM,EAAAC,QAAA,CACf,MAEM,KAAAO,MAAA,SAAAA,MAAA,QAFNZ,mBAAA,CAEM;QAFDT,KAAK,EAAC;MAAgB,IACzBS,mBAAA,CAAiB,cAAX,MAAI,E;wBAGd,MA6BM,CA7BNA,mBAAA,CA6BM,OA7BN8D,WA6BM,GA5BJ9D,mBAAA,CAGM,OAHN+D,WAGM,G,4BAFJ/D,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAA4C,OAA5CgE,WAA4C,EAAAhC,gBAAA,CAAjBtC,KAAA,CAAAO,KAAK,CAACgE,EAAE,iB,GAErCjE,mBAAA,CAGM,OAHNkE,WAGM,G,4BAFJlE,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAiE,OAAjEmE,WAAiE,EAAAnC,gBAAA,CAAtCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAACoE,WAAW,kB,GAEzDrE,mBAAA,CAGM,OAHNsE,WAGM,G,4BAFJtE,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAiE,OAAjEuE,WAAiE,EAAAvC,gBAAA,CAAtCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAACuE,WAAW,kB,GAE9C9E,KAAA,CAAAO,KAAK,CAACqB,MAAM,UAAU5B,KAAA,CAAAO,KAAK,CAACqB,MAAM,U,cAA7C9B,mBAAA,CAGM,OAHNiF,WAGM,G,4BAFJzE,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAgE,OAAhE0E,WAAgE,EAAA1C,gBAAA,CAArCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAAC0E,UAAU,kB,wCAE7CjF,KAAA,CAAAO,KAAK,CAACqB,MAAM,U,cAAvB9B,mBAAA,CAGM,OAHNoF,WAGM,G,4BAFJ5E,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAgE,OAAhE6E,WAAgE,EAAA7C,gBAAA,CAArCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAAC6E,UAAU,kB,wCAE7CpF,KAAA,CAAAO,KAAK,CAACqB,MAAM,U,cAAvB9B,mBAAA,CAGM,OAHNuF,WAGM,G,4BAFJ/E,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAkE,OAAlEgF,WAAkE,EAAAhD,gBAAA,CAAvCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAACgF,YAAY,kB,wCAE/CvF,KAAA,CAAAO,KAAK,CAACqB,MAAM,U,cAAvB9B,mBAAA,CAGM,OAHN0F,WAGM,G,4BAFJlF,mBAAA,CAAmC;QAA9BT,KAAK,EAAC;MAAY,GAAC,OAAK,qBAC7BS,mBAAA,CAAgE,OAAhEmF,WAAgE,EAAAnD,gBAAA,CAArCtB,QAAA,CAAA0D,UAAU,CAAC1E,KAAA,CAAAO,KAAK,CAACmF,UAAU,kB;;QAK5D3D,mBAAA,UAAa,EACb5B,YAAA,CAkCUM,kBAAA;MAlCDZ,KAAK,EAAC;IAAc;MAChBa,MAAM,EAAAC,QAAA,CACf,MAEM,KAAAO,MAAA,SAAAA,MAAA,QAFNZ,mBAAA,CAEM;QAFDT,KAAK,EAAC;MAAgB,IACzBS,mBAAA,CAAiB,cAAX,MAAI,E;wBAGd,MA2BM,CA3BNA,mBAAA,CA2BM,OA3BNqF,WA2BM,GA1BO3F,KAAA,CAAA4F,aAAa,CAACC,MAAM,Q,cAA/B/F,mBAAA,CAQM,OARNgG,WAQM,I,kBAPJhG,mBAAA,CAMMiG,SAAA,QAAAC,WAAA,CANiBhG,KAAA,CAAA4F,aAAa,EAAxBK,OAAO;6BAAnBnG,mBAAA,CAMM;UANiCoG,GAAG,EAAED,OAAO,CAAC1B,EAAE;UAAE1E,KAAK,EAAC;YAC5DS,mBAAA,CAGM,OAHN6F,WAGM,GAFJ7F,mBAAA,CAAgF,OAAhF8F,WAAgF,EAAA9D,gBAAA,CAAjD2D,OAAO,CAACI,MAAM,4CAC7C/F,mBAAA,CAAqE,OAArEgG,WAAqE,EAAAhE,gBAAA,CAAxCtB,QAAA,CAAA0D,UAAU,CAACuB,OAAO,CAACtB,WAAW,kB,GAE7DrE,mBAAA,CAAwD,OAAxDiG,WAAwD,EAAAjE,gBAAA,CAAxB2D,OAAO,CAACO,OAAO,iB;yDAGnD1G,mBAAA,CAA4C,OAA5C2G,WAA4C,EAAZ,QAAM,IAEvBzF,QAAA,CAAA0F,cAAc,I,cAA7BlG,YAAA,CAcUmG,kBAAA;;QAdsBC,KAAK,EAAE5G,KAAA,CAAA6G,WAAW;QAAGC,KAAK,EAAE9G,KAAA,CAAA+G,YAAY;QAAEC,GAAG,EAAC,gBAAgB;QAACnH,KAAK,EAAC;;0BACnG,MASe,CATfM,YAAA,CASe8G,uBAAA;UATDC,IAAI,EAAC;QAAS;4BAC1B,MAOE,CAPF/G,YAAA,CAOEgH,mBAAA;wBANSnH,KAAA,CAAA6G,WAAW,CAACL,OAAO;uEAAnBxG,KAAA,CAAA6G,WAAW,CAACL,OAAO,GAAAY,MAAA;YAC5B/G,IAAI,EAAC,UAAU;YACdgH,IAAI,EAAE,CAAC;YACRC,WAAW,EAAC,QAAQ;YACpBC,SAAS,EAAC,KAAK;YACf,iBAAe,EAAf;;;YAGJpH,YAAA,CAEe8G,uBAAA;4BADb,MAAyF,CAAzF9G,YAAA,CAAyFU,oBAAA;YAA9ER,IAAI,EAAC,SAAS;YAAEU,OAAK,EAAEC,QAAA,CAAAwG,WAAW;YAAGvH,OAAO,EAAED,KAAA,CAAAyH;;8BAAgB,MAAI,KAAAvG,MAAA,SAAAA,MAAA,Q,iBAAJ,MAAI,mB;;;;;;;;QAMrFa,mBAAA,UAAa,EACFf,QAAA,CAAA0G,aAAa,CAAC7B,MAAM,Q,cAA/B/F,mBAAA,CAYM,OAZN6H,WAYM,I,kBAXJ7H,mBAAA,CAUYiG,SAAA,QAAAC,WAAA,CATOhF,QAAA,CAAA0G,aAAa,EAAvBE,MAAM;2BADfpH,YAAA,CAUYK,oBAAA;QARTqF,GAAG,EAAE0B,MAAM,CAAC1B,GAAG;QACf7F,IAAI,EAAEuH,MAAM,CAACvH,IAAI;QACjBS,IAAI,EAAE8G,MAAM,CAAC9G,IAAI;QACjBb,OAAO,EAAE2H,MAAM,CAAC1B,GAAG,kBAAkBlG,KAAA,CAAA6H,aAAa;QAClD9G,OAAK,EAAAqG,MAAA,IAAEpG,QAAA,CAAA8G,YAAY,CAACF,MAAM,CAACG,MAAM;QACjClI,KAAK,EAAAmI,eAAA,CAAEJ,MAAM,CAAC/H,KAAK;;0BAEpB,MAAiB,C,kCAAd+H,MAAM,CAACK,IAAI,iB;;;;;uBAKtBnI,mBAAA,CAGM,OAHNoI,WAGM,GAFJ/H,YAAA,CAAoCgI,mBAAA;IAA1B1G,WAAW,EAAC;EAAW,IACjCtB,YAAA,CAAwDU,oBAAA;IAA7CR,IAAI,EAAC,SAAS;IAAEU,OAAK,EAAEC,QAAA,CAAAC;;sBAAQ,MAAE,KAAAC,MAAA,SAAAA,MAAA,Q,iBAAF,IAAE,mB;;qCAG9Ca,mBAAA,WAAc,EACd5B,YAAA,CASYiI,oBAAA;gBATQpI,KAAA,CAAAqI,oBAAoB;+DAApBrI,KAAA,CAAAqI,oBAAoB,GAAAjB,MAAA;IAAG5F,KAAK,EAAExB,KAAA,CAAAsI,kBAAkB;IAAEC,KAAK,EAAC;;IAE/DC,MAAM,EAAA7H,QAAA,CACf,MAIO,CAJPL,mBAAA,CAIO,QAJPmI,WAIO,GAHLtI,YAAA,CAA+DU,oBAAA;MAAnDE,OAAK,EAAAG,MAAA,QAAAA,MAAA,MAAAkG,MAAA,IAAEpH,KAAA,CAAAqI,oBAAoB;;wBAAU,MAAE,KAAAnH,MAAA,SAAAA,MAAA,Q,iBAAF,IAAE,mB;;QACGlB,KAAA,CAAA0I,UAAU,iBAAiB1I,KAAA,CAAA0I,UAAU,iB,cAA3FlI,YAAA,CAAwHK,oBAAA;;MAA7GR,IAAI,EAAC,QAAQ;MAAEU,OAAK,EAAEC,QAAA,CAAA2H;;wBAAyE,MAAE,KAAAzH,MAAA,SAAAA,MAAA,Q,iBAAF,IAAE,mB;;qDAC5GV,YAAA,CAAsEK,oBAAA;;MAA3DR,IAAI,EAAC,SAAS;MAAEU,OAAK,EAAEC,QAAA,CAAA2H;;wBAAsB,MAAE,KAAAzH,MAAA,SAAAA,MAAA,Q,iBAAF,IAAE,mB;;;sBAL9D,MAAqC,CAArCZ,mBAAA,CAAqC,aAAAgC,gBAAA,CAA7BtC,KAAA,CAAA4I,oBAAoB,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
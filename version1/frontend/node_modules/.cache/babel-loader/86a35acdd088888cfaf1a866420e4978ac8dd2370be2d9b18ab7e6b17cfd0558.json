{"ast":null,"code":"import { tradeAPI } from '../api';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'TradeDetail',\n  data() {\n    return {\n      trade: null,\n      loading: false,\n      buyerInfo: {},\n      sellerInfo: {},\n      tradeMessages: [],\n      // defaultAvatar: 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png',\n      messageForm: {\n        content: ''\n      },\n      messageRules: {\n        content: [{\n          required: true,\n          message: '请输入留言内容',\n          trigger: 'blur'\n        }, {\n          max: 500,\n          message: '留言内容不能超过500个字符',\n          trigger: 'blur'\n        }]\n      },\n      sendingMessage: false,\n      sendingAction: false,\n      confirmDialogVisible: false,\n      confirmDialogTitle: '',\n      confirmDialogContent: '',\n      actionType: ''\n    };\n  },\n  computed: {\n    tradeStatusStep() {\n      switch (this.trade?.status) {\n        case 0:\n          return 2;\n        case 1:\n          return 1;\n        case 2:\n          return 1;\n        // 拒绝也是在第二步\n        case 3:\n          return 2;\n        case 4:\n          return 1;\n        // 取消也是在第二步\n        default:\n          return 2;\n      }\n    },\n    canSendMessage() {\n      // 只有在交易进行中（待确认、已接受）时才能发送留言\n      return this.trade && (this.trade.status === 0 || this.trade.status === 1);\n    },\n    actionButtons() {\n      if (!this.trade) return [];\n      const buttons = [];\n      const currentUserId = JSON.parse(localStorage.getItem('userInfo'))?.id;\n\n      // 买家操作\n      if (currentUserId === this.trade.buyerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'cancel',\n            text: '取消交易',\n            type: 'danger',\n            action: 'cancel'\n          });\n        }\n        if (this.trade.status === 1) {\n          buttons.push({\n            key: 'confirm',\n            text: '确认收货',\n            type: 'success',\n            action: 'confirm'\n          });\n        }\n      }\n\n      // 卖家操作\n      if (currentUserId === this.trade.sellerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'accept',\n            text: '接受交易',\n            type: 'success',\n            class: 'mr-2',\n            action: 'accept'\n          });\n          buttons.push({\n            key: 'reject',\n            text: '拒绝交易',\n            type: 'danger',\n            action: 'reject'\n          });\n        }\n      }\n      return buttons;\n    }\n  },\n  mounted() {\n    this.loadTradeDetail();\n  },\n  methods: {\n    async loadTradeDetail() {\n      const tradeId = this.$route.params.id;\n      this.loading = true;\n      try {\n        const response = await tradeAPI.getTradeById(tradeId);\n        this.trade = response;\n        // 设置买家和卖家信息\n        this.buyerInfo = {\n          username: response.buyerName,\n          contact: response.buyerPhone\n          // avatar: response.buyerAvatar,\n        };\n        this.sellerInfo = {\n          username: response.sellerName,\n          contact: response.sellerPhone\n          // avatar: response.sellerAvatar,\n        };\n\n        // 加载交易留言\n        if (response.messages) {\n          this.tradeMessages = response.messages;\n        }\n      } catch (error) {\n        this.$message.error('加载交易详情失败');\n        this.trade = null;\n      } finally {\n        this.loading = false;\n      }\n    },\n    getProductImage(images) {\n      if (!images) return 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png';\n      const baseURL = 'http://localhost:8080/';\n      return `${baseURL}${images}`;\n    },\n    getCategoryName(categoryId) {\n      const categoryMap = {\n        1: '电子产品',\n        2: '图书文具',\n        3: '服装鞋帽',\n        4: '生活用品',\n        5: '其他'\n      };\n      return categoryMap[categoryId] || '未知';\n    },\n    formatDate(date) {\n      if (!date) return '';\n      return dayjs(date).format(\"YYYY-MM-DD HH:mm\");\n    },\n    getUserInitial(username) {\n      return username ? username.charAt(0).toUpperCase() : 'U';\n    },\n    getStatusType(status) {\n      const statusMap = {\n        0: 'warning',\n        // 待确认\n        1: 'primary',\n        // 已接受\n        2: 'info',\n        // 已拒绝\n        3: 'success',\n        // 已完成\n        4: 'danger' // 已取消\n      };\n      return statusMap[status] || 'info';\n    },\n    getStatusText(status) {\n      const statusMap = {\n        0: '待确认',\n        1: '已接受',\n        2: '已拒绝',\n        3: '已完成',\n        4: '已取消'\n      };\n      return statusMap[status] || '未知';\n    },\n    handleAction(action) {\n      this.actionType = action;\n      switch (action) {\n        case 'cancel':\n          this.confirmDialogTitle = '取消交易';\n          this.confirmDialogContent = '确定要取消该交易吗？';\n          break;\n        case 'confirm':\n          this.confirmDialogTitle = '确认收货';\n          this.confirmDialogContent = '请确认您已收到商品，确认后交易将完成。';\n          break;\n        case 'accept':\n          this.confirmDialogTitle = '接受交易';\n          this.confirmDialogContent = '确定要接受该交易申请吗？';\n          break;\n        case 'reject':\n          this.confirmDialogTitle = '拒绝交易';\n          this.confirmDialogContent = '确定要拒绝该交易申请吗？';\n          break;\n      }\n      this.confirmDialogVisible = true;\n    },\n    async confirmAction() {\n      this.confirmDialogVisible = false;\n      this.sendingAction = true;\n      try {\n        switch (this.actionType) {\n          case 'cancel':\n            await tradeAPI.cancelTrade(this.trade.id);\n            this.$message.success('交易已取消');\n            break;\n          case 'confirm':\n            await tradeAPI.confirmReceive(this.trade.id);\n            this.$message.success('已确认收货，交易完成');\n            break;\n          case 'accept':\n            await tradeAPI.acceptTrade(this.trade.id);\n            this.$message.success('已接受交易');\n            break;\n          case 'reject':\n            await tradeAPI.rejectTrade(this.trade.id);\n            this.$message.success('已拒绝交易');\n            break;\n        }\n        // 重新加载交易详情\n        this.loadTradeDetail();\n      } catch (error) {\n        this.$message.error('操作失败，请重试');\n      } finally {\n        this.sendingAction = false;\n      }\n    },\n    // async sendMessage() {\n    //   this.$refs.messageFormRef.validate(async (valid) => {\n    //     if (valid) {\n    //       this.sendingMessage = true\n    //       try {\n    //         const response = await tradeAPI.sendMessage(this.trade.id, { content: this.messageForm.content })\n\n    //         // 添加新留言到列表\n    //         this.tradeMessages.push(response)\n    //         // 清空表单\n    //         this.messageForm.content = ''\n    //         this.$refs.messageFormRef.resetFields()\n\n    //         this.$message.success('留言发送成功')\n    //       } catch (error) {\n    //         this.$message.error('留言发送失败，请重试')\n    //       } finally {\n    //         this.sendingMessage = false\n    //       }\n    //     }\n    //   })\n    // },\n    goBack() {\n      this.$router.push('/user/trades');\n    }\n  }\n};","map":{"version":3,"names":["tradeAPI","dayjs","name","data","trade","loading","buyerInfo","sellerInfo","tradeMessages","messageForm","content","messageRules","required","message","trigger","max","sendingMessage","sendingAction","confirmDialogVisible","confirmDialogTitle","confirmDialogContent","actionType","computed","tradeStatusStep","status","canSendMessage","actionButtons","buttons","currentUserId","JSON","parse","localStorage","getItem","id","buyerId","push","key","text","type","action","sellerId","class","mounted","loadTradeDetail","methods","tradeId","$route","params","response","getTradeById","username","buyerName","contact","buyerPhone","sellerName","sellerPhone","messages","error","$message","getProductImage","images","baseURL","getCategoryName","categoryId","categoryMap","formatDate","date","format","getUserInitial","charAt","toUpperCase","getStatusType","statusMap","getStatusText","handleAction","confirmAction","cancelTrade","success","confirmReceive","acceptTrade","rejectTrade","goBack","$router"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\TradeDetail.vue"],"sourcesContent":["<template>\n  <div class=\"trade-detail-container\">\n    <div v-if=\"loading\" class=\"loading\">\n      <el-spinner type=\"spinner\" />\n      <p>加载中...</p>\n    </div>\n    <el-card v-else-if=\"trade\" class=\"detail-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>交易详情</span>\n          <el-button type=\"primary\" size=\"small\" @click=\"goBack\" class=\"back-btn\">\n            返回列表\n          </el-button>\n        </div>\n      </template>\n      \n      <!-- 交易状态概览 -->\n      <div class=\"status-overview\">\n        <el-steps :active=\"tradeStatusStep\" finish-status=\"success\" align-center>\n          <el-step title=\"交易申请\" description=\"买家发起交易申请\" />\n          <el-step title=\"卖家确认\" description=\"卖家接受或拒绝交易\" />\n          <el-step title=\"交易完成\" description=\"买家确认收货\" />\n        </el-steps>\n        <el-tag :type=\"getStatusType(trade.status)\" class=\"status-tag\">\n          {{ getStatusText(trade.status) }}\n        </el-tag>\n      </div>\n      \n      <div class=\"detail-content\">\n        <!-- 商品信息 -->\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>商品信息</span>\n            </div>\n          </template>\n          <div class=\"product-info\">\n            <img :src=\"getProductImage(trade.productImages)\" class=\"product-image\" />\n            <div class=\"product-details\">\n              <h3 class=\"product-name\">{{ trade.productName }}</h3>\n              <p class=\"product-price\">¥{{ trade.productPrice }}</p>\n              <p class=\"product-category\">分类：{{ getCategoryName(trade.productCategory) }}</p>\n              <p class=\"product-description\">{{ trade.productDescription }}</p>\n            </div>\n          </div>\n        </el-card>\n        \n        <!-- 交易方信息 -->\n        <div class=\"trade-parties\">\n          <el-card class=\"info-section\">\n            <template #header>\n              <div class=\"section-header\">\n                <span>交易方信息</span>\n              </div>\n            </template>\n            <div class=\"parties-info\">\n              <div class=\"party-item\">\n                <div class=\"party-label\">买家</div>\n                <div class=\"party-content\">\n                  <el-avatar :size=\"40\" :src=\"buyerInfo.avatar || defaultAvatar\">\n                    {{ getUserInitial(buyerInfo.username) }}\n                  </el-avatar>\n                  <div class=\"party-details\">\n                    <div class=\"party-name\">{{ buyerInfo.username }}</div>\n                    <div class=\"party-contact\">联系方式：{{ buyerInfo.contact || '未提供' }}</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"party-item\">\n                <div class=\"party-label\">卖家</div>\n                <div class=\"party-content\">\n                  <el-avatar :size=\"40\" :src=\"sellerInfo.avatar || defaultAvatar\">\n                    {{ getUserInitial(sellerInfo.username) }}\n                  </el-avatar>\n                  <div class=\"party-details\">\n                    <div class=\"party-name\">{{ sellerInfo.username }}</div>\n                    <div class=\"party-contact\">联系方式：{{ sellerInfo.contact || '未提供' }}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </div>\n        \n        <!-- 交易信息 -->\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>交易信息</span>\n            </div>\n          </template>\n          <div class=\"trade-info\">\n            <div class=\"info-row\">\n              <div class=\"info-label\">交易ID：</div>\n              <div class=\"info-value\">{{ trade.id }}</div>\n            </div>\n            <div class=\"info-row\">\n              <div class=\"info-label\">创建时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.createTime) }}</div>\n            </div>\n            <!-- <div class=\"info-row\">\n              <div class=\"info-label\">更新时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.updateTime) }}</div>\n            </div> -->\n            <div v-if=\"trade.status === 1 || trade.status === 3\" class=\"info-row\">\n              <div class=\"info-label\">接受时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.acceptTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 2\" class=\"info-row\">\n              <div class=\"info-label\">拒绝时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.rejectTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 3\" class=\"info-row\">\n              <div class=\"info-label\">完成时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.completeTime) }}</div>\n            </div>\n            <div v-if=\"trade.status === 4\" class=\"info-row\">\n              <div class=\"info-label\">取消时间：</div>\n              <div class=\"info-value\">{{ formatDate(trade.cancelTime) }}</div>\n            </div>\n          </div>\n        </el-card>\n        \n        <!-- 交易留言\n        <el-card class=\"info-section\">\n          <template #header>\n            <div class=\"section-header\">\n              <span>交易留言</span>\n            </div>\n          </template>\n          <div class=\"messages-section\">\n            <div v-if=\"tradeMessages.length > 0\" class=\"messages-list\">\n              <div v-for=\"message in tradeMessages\" :key=\"message.id\" class=\"message-item\">\n                <div class=\"message-header\">\n                  <div class=\"message-sender\">{{ message.sender === 'buyer' ? '买家' : '卖家' }}</div>\n                  <div class=\"message-time\">{{ formatDate(message.createdTime) }}</div>\n                </div>\n                <div class=\"message-content\">{{ message.content }}</div>\n              </div>\n            </div>\n            <div v-else class=\"no-messages\">暂无交易留言</div>\n            \n            <el-form v-if=\"canSendMessage\" :model=\"messageForm\" :rules=\"messageRules\" ref=\"messageFormRef\" class=\"message-form\">\n              <el-form-item prop=\"content\">\n                <el-input\n                  v-model=\"messageForm.content\"\n                  type=\"textarea\"\n                  :rows=\"3\"\n                  placeholder=\"输入留言内容\"\n                  maxlength=\"500\"\n                  show-word-limit\n                />\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" @click=\"sendMessage\" :loading=\"sendingMessage\">发送留言</el-button>\n              </el-form-item>\n            </el-form>\n          </div>\n        </el-card> -->\n        \n        <!-- 操作按钮 -->\n        <div v-if=\"actionButtons.length > 0\" class=\"action-buttons\">\n          <el-button\n            v-for=\"button in actionButtons\"\n            :key=\"button.key\"\n            :type=\"button.type\"\n            :size=\"button.size || 'large'\"\n            :loading=\"button.key === 'sending' && sendingAction\"\n            @click=\"handleAction(button.action)\"\n            :class=\"button.class\"\n          >\n            {{ button.text }}\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n    <div v-else class=\"not-found\">\n      <el-empty description=\"交易不存在或已删除\" />\n      <el-button type=\"primary\" @click=\"goBack\">返回</el-button>\n    </div>\n    \n    <!-- 确认对话框 -->\n    <el-dialog v-model=\"confirmDialogVisible\" :title=\"confirmDialogTitle\" width=\"30%\">\n      <div>{{ confirmDialogContent }}</div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"confirmDialogVisible = false\">取消</el-button>\n          <el-button type=\"danger\" @click=\"confirmAction\" v-if=\"actionType === 'cancel' || actionType === 'reject'\">确认</el-button>\n          <el-button type=\"success\" @click=\"confirmAction\" v-else>确认</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { tradeAPI } from '../api'\nimport dayjs from 'dayjs';\n\nexport default {\n  name: 'TradeDetail',\n  data() {\n    return {\n      trade: null,\n      loading: false,\n      buyerInfo: {},\n      sellerInfo: {},\n      tradeMessages: [],\n      // defaultAvatar: 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png',\n      messageForm: {\n        content: ''\n      },\n      messageRules: {\n        content: [\n          { required: true, message: '请输入留言内容', trigger: 'blur' },\n          { max: 500, message: '留言内容不能超过500个字符', trigger: 'blur' }\n        ]\n      },\n      sendingMessage: false,\n      sendingAction: false,\n      confirmDialogVisible: false,\n      confirmDialogTitle: '',\n      confirmDialogContent: '',\n      actionType: ''\n    }\n  },\n  computed: {\n    tradeStatusStep() {\n      switch (this.trade?.status) {\n        case 0: return 2\n        case 1: return 1\n        case 2: return 1 // 拒绝也是在第二步\n        case 3: return 2\n        case 4: return 1 // 取消也是在第二步\n        default: return 2\n      }\n    },\n    canSendMessage() {\n      // 只有在交易进行中（待确认、已接受）时才能发送留言\n      return this.trade && (this.trade.status === 0 || this.trade.status === 1)\n    },\n    actionButtons() {\n      if (!this.trade) return []\n      \n      const buttons = []\n      const currentUserId = JSON.parse(localStorage.getItem('userInfo'))?.id\n      \n      // 买家操作\n      if (currentUserId === this.trade.buyerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'cancel',\n            text: '取消交易',\n            type: 'danger',\n            action: 'cancel'\n          })\n        }\n        if (this.trade.status === 1) {\n          buttons.push({\n            key: 'confirm',\n            text: '确认收货',\n            type: 'success',\n            action: 'confirm'\n          })\n        }\n      }\n      \n      // 卖家操作\n      if (currentUserId === this.trade.sellerId) {\n        if (this.trade.status === 0) {\n          buttons.push({\n            key: 'accept',\n            text: '接受交易',\n            type: 'success',\n            class: 'mr-2',\n            action: 'accept'\n          })\n          buttons.push({\n            key: 'reject',\n            text: '拒绝交易',\n            type: 'danger',\n            action: 'reject'\n          })\n        }\n      }\n      \n      return buttons\n    }\n  },\n  mounted() {\n    this.loadTradeDetail()\n  },\n  methods: {\n    async loadTradeDetail() {\n      const tradeId = this.$route.params.id\n      this.loading = true\n      try {\n        const response = await tradeAPI.getTradeById(tradeId)\n        this.trade = response\n        // 设置买家和卖家信息\n        this.buyerInfo = {\n          username: response.buyerName,\n          contact: response.buyerPhone\n          // avatar: response.buyerAvatar,\n        }\n        this.sellerInfo = {\n          username: response.sellerName,\n          contact: response.sellerPhone\n          // avatar: response.sellerAvatar,\n        }\n        \n        // 加载交易留言\n        if (response.messages) {\n          this.tradeMessages = response.messages\n        }\n      } catch (error) {\n        this.$message.error('加载交易详情失败')\n        this.trade = null\n      } finally {\n        this.loading = false\n      }\n    },\n    getProductImage(images) {\n      if (!images) return 'https://img.alicdn.com/imgextra/i4/O1CN01q0UcHt1h1sVt0jA8O_!!6000000004122-2-tps-112-112.png'\n      const baseURL = 'http://localhost:8080/'\n      return `${baseURL}${images}`\n    },\n    getCategoryName(categoryId) {\n      const categoryMap = {\n        1: '电子产品',\n        2: '图书文具',\n        3: '服装鞋帽',\n        4: '生活用品',\n        5: '其他'\n      }\n      return categoryMap[categoryId] || '未知'\n    },\n    formatDate(date) {\n      if (!date) return ''\n      return dayjs(date).format(\"YYYY-MM-DD HH:mm\")\n    },\n    getUserInitial(username) {\n      return username ? username.charAt(0).toUpperCase() : 'U'\n    },\n    getStatusType(status) {\n      const statusMap = {\n        0: 'warning', // 待确认\n        1: 'primary', // 已接受\n        2: 'info',    // 已拒绝\n        3: 'success', // 已完成\n        4: 'danger'   // 已取消\n      }\n      return statusMap[status] || 'info'\n    },\n    getStatusText(status) {\n      const statusMap = {\n        0: '待确认',\n        1: '已接受',\n        2: '已拒绝',\n        3: '已完成',\n        4: '已取消'\n      }\n      return statusMap[status] || '未知'\n    },\n    handleAction(action) {\n      this.actionType = action\n      \n      switch (action) {\n        case 'cancel':\n          this.confirmDialogTitle = '取消交易'\n          this.confirmDialogContent = '确定要取消该交易吗？'\n          break\n        case 'confirm':\n          this.confirmDialogTitle = '确认收货'\n          this.confirmDialogContent = '请确认您已收到商品，确认后交易将完成。'\n          break\n        case 'accept':\n          this.confirmDialogTitle = '接受交易'\n          this.confirmDialogContent = '确定要接受该交易申请吗？'\n          break\n        case 'reject':\n          this.confirmDialogTitle = '拒绝交易'\n          this.confirmDialogContent = '确定要拒绝该交易申请吗？'\n          break\n      }\n      \n      this.confirmDialogVisible = true\n    },\n    async confirmAction() {\n      this.confirmDialogVisible = false\n      this.sendingAction = true\n      \n      try {\n        switch (this.actionType) {\n          case 'cancel':\n            await tradeAPI.cancelTrade(this.trade.id)\n            this.$message.success('交易已取消')\n            break\n          case 'confirm':\n            await tradeAPI.confirmReceive(this.trade.id)\n            this.$message.success('已确认收货，交易完成')\n            break\n          case 'accept':\n            await tradeAPI.acceptTrade(this.trade.id)\n            this.$message.success('已接受交易')\n            break\n          case 'reject':\n            await tradeAPI.rejectTrade(this.trade.id)\n            this.$message.success('已拒绝交易')\n            break\n        }\n        // 重新加载交易详情\n        this.loadTradeDetail()\n      } catch (error) {\n        this.$message.error('操作失败，请重试')\n      } finally {\n        this.sendingAction = false\n      }\n    },\n    // async sendMessage() {\n    //   this.$refs.messageFormRef.validate(async (valid) => {\n    //     if (valid) {\n    //       this.sendingMessage = true\n    //       try {\n    //         const response = await tradeAPI.sendMessage(this.trade.id, { content: this.messageForm.content })\n            \n    //         // 添加新留言到列表\n    //         this.tradeMessages.push(response)\n    //         // 清空表单\n    //         this.messageForm.content = ''\n    //         this.$refs.messageFormRef.resetFields()\n            \n    //         this.$message.success('留言发送成功')\n    //       } catch (error) {\n    //         this.$message.error('留言发送失败，请重试')\n    //       } finally {\n    //         this.sendingMessage = false\n    //       }\n    //     }\n    //   })\n    // },\n    goBack() {\n      this.$router.push('/user/trades')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.trade-detail-container {\n  padding: 0;\n}\n\n.loading,\n.not-found {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 20px;\n}\n\n.detail-card {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 500;\n  color: #303133;\n}\n\n/* 状态概览 */\n.status-overview {\n  position: relative;\n  padding: 30px 0;\n  margin-bottom: 30px;\n  border-bottom: 1px solid #EBEEF5;\n}\n\n.status-tag {\n  position: absolute;\n  top: 30px;\n  right: 0;\n  font-size: 16px;\n  padding: 6px 12px;\n}\n\n/* 详情内容 */\n.detail-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.info-section {\n  border-radius: 4px;\n}\n\n.section-header {\n  font-size: 16px;\n  font-weight: 500;\n  color: #303133;\n}\n\n/* 商品信息 */\n.product-info {\n  display: flex;\n  gap: 20px;\n}\n\n.product-image {\n  width: 200px;\n  height: 200px;\n  object-fit: cover;\n  border-radius: 4px;\n}\n\n.product-details {\n  flex: 1;\n}\n\n.product-name {\n  font-size: 18px;\n  font-weight: 500;\n  margin-bottom: 10px;\n}\n\n.product-price {\n  font-size: 20px;\n  font-weight: 600;\n  color: #F56C6C;\n  margin-bottom: 10px;\n}\n\n.product-category {\n  color: #606266;\n  margin-bottom: 10px;\n}\n\n.product-description {\n  color: #606266;\n  line-height: 1.6;\n  word-break: break-all;\n}\n\n/* 交易方信息 */\n.parties-info {\n  display: flex;\n  gap: 40px;\n}\n\n.party-item {\n  flex: 1;\n}\n\n.party-label {\n  font-weight: 500;\n  margin-bottom: 10px;\n  color: #303133;\n}\n\n.party-content {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.party-details {\n  flex: 1;\n}\n\n.party-name {\n  font-weight: 500;\n  margin-bottom: 5px;\n}\n\n.party-contact {\n  color: #606266;\n}\n\n/* 交易信息 */\n.trade-info {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.info-row {\n  display: flex;\n  gap: 15px;\n}\n\n.info-label {\n  width: 120px;\n  font-weight: 500;\n  color: #606266;\n}\n\n.info-value {\n  flex: 1;\n  color: #303133;\n}\n\n/* 留言区 */\n.messages-section {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.messages-list {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.message-item {\n  padding: 15px;\n  background-color: #F5F7FA;\n  border-radius: 4px;\n}\n\n.message-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n\n.message-sender {\n  font-weight: 500;\n  color: #303133;\n}\n\n.message-time {\n  color: #909399;\n  font-size: 12px;\n}\n\n.message-content {\n  color: #303133;\n  line-height: 1.6;\n}\n\n.no-messages {\n  text-align: center;\n  color: #909399;\n  padding: 30px 0;\n}\n\n.message-form {\n  margin-top: 20px;\n}\n\n/* 操作按钮 */\n.action-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 30px;\n  padding: 20px 0;\n}\n\n.mr-2 {\n  margin-right: 10px;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .detail-card {\n    max-width: 100%;\n  }\n  \n  .product-info {\n    flex-direction: column;\n  }\n  \n  .product-image {\n    width: 100%;\n    height: auto;\n  }\n  \n  .parties-info {\n    flex-direction: column;\n    gap: 20px;\n  }\n  \n  .info-row {\n    flex-direction: column;\n    gap: 5px;\n  }\n  \n  .info-label {\n    width: auto;\n  }\n  \n  .status-tag {\n    position: static;\n    display: block;\n    margin-top: 20px;\n    text-align: center;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { ArrowDown, Search } from '@element-plus/icons-vue';\nexport default {\n  name: 'HomeLayout',\n  components: {\n    ArrowDown,\n    Search\n  },\n  data() {\n    return {\n      searchKeyword: '',\n      isClearable: true,\n      isLogin: false,\n      userInfo: null\n    };\n  },\n  mounted() {\n    this.checkLoginStatus();\n  },\n  methods: {\n    checkLoginStatus() {\n      const token = localStorage.getItem('token');\n      const userInfoStr = localStorage.getItem('userInfo');\n      if (token && userInfoStr) {\n        this.isLogin = true;\n        try {\n          this.userInfo = JSON.parse(userInfoStr);\n        } catch (error) {\n          console.error('解析用户数据失败:', error);\n        }\n      }\n    },\n    handleCommand(command) {\n      switch (command) {\n        case 'info':\n          this.$router.push('/user/info');\n          break;\n        case 'products':\n          this.$router.push('/user/products');\n          break;\n        case 'trades':\n          this.$router.push('/user/trades');\n          break;\n        case 'create':\n          this.$router.push('/product/create');\n          break;\n        case 'logout':\n          this.handleLogout();\n          break;\n      }\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token');\n        localStorage.removeItem('userInfo');\n        this.isLogin = false;\n        this.userInfo = null;\n        this.$message.success('退出成功');\n        this.$router.push('/');\n      }).catch(() => {\n        // 取消操作\n      });\n    },\n    handleSearch() {\n      if (this.searchKeyword.trim()) {\n        this.$router.push({\n          path: '/',\n          query: {\n            keyword: this.searchKeyword\n          }\n        });\n      }\n    },\n    toHome() {\n      this.$router.push('/');\n    },\n    toLogin() {\n      this.$router.push('/login');\n    },\n    toRegister() {\n      this.$router.push('/register');\n    }\n  },\n  watch: {\n    // 监听路由变化，更新登录状态\n    '$route'(to, from) {\n      this.checkLoginStatus();\n    }\n  }\n};","map":{"version":3,"names":["ArrowDown","Search","name","components","data","searchKeyword","isClearable","isLogin","userInfo","mounted","checkLoginStatus","methods","token","localStorage","getItem","userInfoStr","JSON","parse","error","console","handleCommand","command","$router","push","handleLogout","$confirm","confirmButtonText","cancelButtonText","type","then","removeItem","$message","success","catch","handleSearch","trim","path","query","keyword","toHome","toLogin","toRegister","watch","$route","to","from"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <!-- 顶部导航栏 -->\n    <el-header class=\"header\">\n      <div class=\"header-content\">\n        <div class=\"logo\" @click=\"toHome\">\n          <h1>校园二手交易</h1>\n        </div>\n        <div class=\"search-container\">\n          <el-input\n            v-model=\"searchKeyword\"\n            placeholder=\"搜索商品\"\n            prefix-icon=\"Search\"\n            @keyup.enter=\"handleSearch\"\n            class=\"search-input\"\n            :clearable=\"isClearable\"\n          >\n            <template #append>\n              <el-button @click=\"handleSearch\" icon=\"Search\" />\n            </template>\n          </el-input>\n        </div>\n        <div class=\"nav-right\">\n          <el-button v-if=\"!isLogin\" type=\"text\" @click=\"toLogin\">登录</el-button>\n          <el-button v-if=\"!isLogin\" type=\"primary\" @click=\"toRegister\">注册</el-button>\n          <template v-else>\n            <el-dropdown @command=\"handleCommand\">\n              <span class=\"user-dropdown\">\n                <el-avatar :size=\"32\" :src=\"userInfo?.avatar || ''\">{{ userInfo?.username?.charAt(0) }}</el-avatar>\n                <span class=\"user-name\">{{ userInfo?.username }}</span>\n                <el-icon class=\"el-icon--right\"><arrow-down /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item command=\"info\">个人中心</el-dropdown-item>\n                  <el-dropdown-item command=\"products\">我的商品</el-dropdown-item>\n                  <el-dropdown-item command=\"trades\">我的交易</el-dropdown-item>\n                  <el-dropdown-item command=\"create\" type=\"primary\">发布商品</el-dropdown-item>\n                  <el-dropdown-item command=\"logout\" divided>退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </template>\n        </div>\n      </div>\n    </el-header>\n\n    <!-- 内容区域 -->\n    <el-main class=\"main\">\n      <router-view v-slot=\"{ Component }\">\n        <transition name=\"fade\" mode=\"out-in\">\n          <component :is=\"Component\" />\n        </transition>\n      </router-view>\n    </el-main>\n\n    <!-- 页脚 -->\n    <el-footer class=\"footer\">\n      <div class=\"footer-content\">\n        <p>&copy; 2024 校园二手商品交易系统 - 版权所有</p>\n        <p>让闲置物品流动起来，共享美好校园生活</p>\n      </div>\n    </el-footer>\n  </div>\n</template>\n\n<script>\nimport { ArrowDown, Search } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'HomeLayout',\n  components: {\n    ArrowDown,\n    Search\n  },\n  data() {\n    return {\n      searchKeyword: '',\n      isClearable:true,\n      isLogin: false,\n      userInfo: null\n    }\n  },\n  mounted() {\n    this.checkLoginStatus()\n  },\n  methods: {\n    checkLoginStatus() {\n      const token = localStorage.getItem('token')\n      const userInfoStr = localStorage.getItem('userInfo')\n      if (token && userInfoStr) {\n        this.isLogin = true\n        try{\n          this.userInfo = JSON.parse(userInfoStr)\n        }catch (error){\n          console.error('解析用户数据失败:', error);\n        }\n      }\n    },\n    handleCommand(command) {\n      switch (command) {\n        case 'info':\n          this.$router.push('/user/info')\n          break\n        case 'products':\n          this.$router.push('/user/products')\n          break\n        case 'trades':\n          this.$router.push('/user/trades')\n          break\n        case 'create':\n          this.$router.push('/product/create')\n          break\n        case 'logout':\n          this.handleLogout()\n          break\n      }\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token')\n        localStorage.removeItem('userInfo')\n        this.isLogin = false\n        this.userInfo = null\n        this.$message.success('退出成功')\n        this.$router.push('/')\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    handleSearch() {\n      if (this.searchKeyword.trim()) {\n        this.$router.push({ path: '/', query: { keyword: this.searchKeyword } })\n      }\n    },\n    toHome() {\n      this.$router.push('/')\n    },\n    toLogin() {\n      this.$router.push('/login')\n    },\n    toRegister() {\n      this.$router.push('/register')\n    }\n  },\n  watch: {\n    // 监听路由变化，更新登录状态\n    '$route'(to, from) {\n      this.checkLoginStatus()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background-color: #fff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 0;\n  height: 60px;\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n}\n\n.logo h1 {\n  font-size: 24px;\n  color: #667eea;\n  margin: 0;\n  cursor: pointer;\n}\n\n.search-container {\n  flex: 1;\n  max-width: 500px;\n  margin: 0 40px;\n}\n\n.search-input {\n  width: 100%;\n}\n\n.nav-right {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.user-dropdown {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.user-dropdown:hover {\n  background-color: #f5f5f5;\n}\n\n.user-name {\n  font-size: 14px;\n}\n\n.main {\n  flex: 1;\n  max-width: 1200px;\n  margin: 20px auto;\n  width: 100%;\n  padding: 0 20px;\n}\n\n.footer {\n  background-color: #f5f7fa;\n  padding: 20px 0;\n  margin-top: auto;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  text-align: center;\n  color: #606266;\n}\n\n.footer-content p {\n  margin: 5px 0;\n}\n\n/* 过渡动画 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
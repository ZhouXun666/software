{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withKeys as _withKeys, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, Transition as _Transition, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"home-container\"\n};\nconst _hoisted_2 = {\n  class: \"header-content\"\n};\nconst _hoisted_3 = {\n  class: \"search-container\"\n};\nconst _hoisted_4 = {\n  class: \"nav-right\"\n};\nconst _hoisted_5 = {\n  class: \"user-dropdown\"\n};\nconst _hoisted_6 = {\n  class: \"user-name\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_arrow_down = _resolveComponent(\"arrow-down\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\");\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\");\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_footer = _resolveComponent(\"el-footer\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 顶部导航栏 \"), _createVNode(_component_el_header, {\n    class: \"header\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n      class: \"logo\",\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.toHome && $options.toHome(...args))\n    }, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"h1\", null, \"校园二手交易\", -1 /* CACHED */)]))]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n      modelValue: $data.searchKeyword,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchKeyword = $event),\n      placeholder: \"搜索商品\",\n      \"prefix-icon\": \"Search\",\n      onKeyup: _withKeys($options.handleSearch, [\"enter\"]),\n      class: \"search-input\",\n      clearable: $data.isClearable\n    }, {\n      append: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: $options.handleSearch,\n        icon: \"Search\"\n      }, null, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\", \"onKeyup\", \"clearable\"])]), _createElementVNode(\"div\", _hoisted_4, [!$data.isLogin ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"text\",\n      onClick: $options.toLogin\n    }, {\n      default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\"登录\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), !$data.isLogin ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 1,\n      type: \"primary\",\n      onClick: $options.toRegister\n    }, {\n      default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\"注册\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])) : (_openBlock(), _createBlock(_component_el_dropdown, {\n      key: 2,\n      onCommand: $options.handleCommand\n    }, {\n      dropdown: _withCtx(() => [_createVNode(_component_el_dropdown_menu, null, {\n        default: _withCtx(() => [_createVNode(_component_el_dropdown_item, {\n          command: \"info\"\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\"个人中心\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_dropdown_item, {\n          command: \"products\"\n        }, {\n          default: _withCtx(() => [...(_cache[6] || (_cache[6] = [_createTextVNode(\"我的商品\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_dropdown_item, {\n          command: \"trades\"\n        }, {\n          default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createTextVNode(\"我的交易\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_dropdown_item, {\n          command: \"create\",\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\"发布商品\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_dropdown_item, {\n          command: \"logout\",\n          divided: \"\"\n        }, {\n          default: _withCtx(() => [...(_cache[9] || (_cache[9] = [_createTextVNode(\"退出登录\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_5, [_createVNode(_component_el_avatar, {\n        size: 32,\n        src: $data.userInfo?.avatar || ''\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.userInfo?.username?.charAt(0)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($data.userInfo?.username), 1 /* TEXT */), _createVNode(_component_el_icon, {\n        class: \"el-icon--right\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_arrow_down)]),\n        _: 1 /* STABLE */\n      })])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onCommand\"]))])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 内容区域 \"), _createVNode(_component_el_main, {\n    class: \"main\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_router_view, null, {\n      default: _withCtx(({\n        Component\n      }) => [_createVNode(_Transition, {\n        name: \"fade\",\n        mode: \"out-in\"\n      }, {\n        default: _withCtx(() => [(_openBlock(), _createBlock(_resolveDynamicComponent(Component)))]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 页脚 \"), _createVNode(_component_el_footer, {\n    class: \"footer\"\n  }, {\n    default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createElementVNode(\"div\", {\n      class: \"footer-content\"\n    }, [_createElementVNode(\"p\", null, \"© 2024 校园二手商品交易系统 - 版权所有\"), _createElementVNode(\"p\", null, \"让闲置物品流动起来，共享美好校园生活\")], -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createVNode","_component_el_header","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","toHome","_hoisted_3","_component_el_input","$data","searchKeyword","$event","placeholder","onKeyup","_withKeys","handleSearch","clearable","isClearable","append","_withCtx","_component_el_button","icon","_hoisted_4","isLogin","_createBlock","type","toLogin","toRegister","_component_el_dropdown","onCommand","handleCommand","dropdown","_component_el_dropdown_menu","_component_el_dropdown_item","command","divided","_hoisted_5","_component_el_avatar","size","src","userInfo","avatar","username","charAt","_hoisted_6","_toDisplayString","_component_el_icon","_component_arrow_down","_component_el_main","_component_router_view","Component","_Transition","name","mode","_resolveDynamicComponent","_component_el_footer"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <!-- 顶部导航栏 -->\n    <el-header class=\"header\">\n      <div class=\"header-content\">\n        <div class=\"logo\" @click=\"toHome\">\n          <h1>校园二手交易</h1>\n        </div>\n        <div class=\"search-container\">\n          <el-input\n            v-model=\"searchKeyword\"\n            placeholder=\"搜索商品\"\n            prefix-icon=\"Search\"\n            @keyup.enter=\"handleSearch\"\n            class=\"search-input\"\n            :clearable=\"isClearable\"\n          >\n            <template #append>\n              <el-button @click=\"handleSearch\" icon=\"Search\" />\n            </template>\n          </el-input>\n        </div>\n        <div class=\"nav-right\">\n          <el-button v-if=\"!isLogin\" type=\"text\" @click=\"toLogin\">登录</el-button>\n          <el-button v-if=\"!isLogin\" type=\"primary\" @click=\"toRegister\">注册</el-button>\n          <template v-else>\n            <el-dropdown @command=\"handleCommand\">\n              <span class=\"user-dropdown\">\n                <el-avatar :size=\"32\" :src=\"userInfo?.avatar || ''\">{{ userInfo?.username?.charAt(0) }}</el-avatar>\n                <span class=\"user-name\">{{ userInfo?.username }}</span>\n                <el-icon class=\"el-icon--right\"><arrow-down /></el-icon>\n              </span>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item command=\"info\">个人中心</el-dropdown-item>\n                  <el-dropdown-item command=\"products\">我的商品</el-dropdown-item>\n                  <el-dropdown-item command=\"trades\">我的交易</el-dropdown-item>\n                  <el-dropdown-item command=\"create\" type=\"primary\">发布商品</el-dropdown-item>\n                  <el-dropdown-item command=\"logout\" divided>退出登录</el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </template>\n        </div>\n      </div>\n    </el-header>\n\n    <!-- 内容区域 -->\n    <el-main class=\"main\">\n      <router-view v-slot=\"{ Component }\">\n        <transition name=\"fade\" mode=\"out-in\">\n          <component :is=\"Component\" />\n        </transition>\n      </router-view>\n    </el-main>\n\n    <!-- 页脚 -->\n    <el-footer class=\"footer\">\n      <div class=\"footer-content\">\n        <p>&copy; 2024 校园二手商品交易系统 - 版权所有</p>\n        <p>让闲置物品流动起来，共享美好校园生活</p>\n      </div>\n    </el-footer>\n  </div>\n</template>\n\n<script>\nimport { ArrowDown, Search } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'HomeLayout',\n  components: {\n    ArrowDown,\n    Search\n  },\n  data() {\n    return {\n      searchKeyword: '',\n      isClearable:true,\n      isLogin: false,\n      userInfo: null\n    }\n  },\n  mounted() {\n    this.checkLoginStatus()\n  },\n  methods: {\n    checkLoginStatus() {\n      const token = localStorage.getItem('token')\n      const userInfoStr = localStorage.getItem('userInfo')\n      if (token && userInfoStr) {\n        this.isLogin = true\n        try{\n          this.userInfo = JSON.parse(userInfoStr)\n        }catch (error){\n          console.error('解析用户数据失败:', error);\n        }\n      }\n    },\n    handleCommand(command) {\n      switch (command) {\n        case 'info':\n          this.$router.push('/user/info')\n          break\n        case 'products':\n          this.$router.push('/user/products')\n          break\n        case 'trades':\n          this.$router.push('/user/trades')\n          break\n        case 'create':\n          this.$router.push('/product/create')\n          break\n        case 'logout':\n          this.handleLogout()\n          break\n      }\n    },\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        localStorage.removeItem('token')\n        localStorage.removeItem('userInfo')\n        this.isLogin = false\n        this.userInfo = null\n        this.$message.success('退出成功')\n        this.$router.push('/')\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    handleSearch() {\n      if (this.searchKeyword.trim()) {\n        this.$router.push({ path: '/', query: { keyword: this.searchKeyword } })\n      }\n    },\n    toHome() {\n      this.$router.push('/')\n    },\n    toLogin() {\n      this.$router.push('/login')\n    },\n    toRegister() {\n      this.$router.push('/register')\n    }\n  },\n  watch: {\n    // 监听路由变化，更新登录状态\n    '$route'(to, from) {\n      this.checkLoginStatus()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background-color: #fff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 0;\n  height: 60px;\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n}\n\n.logo h1 {\n  font-size: 24px;\n  color: #667eea;\n  margin: 0;\n  cursor: pointer;\n}\n\n.search-container {\n  flex: 1;\n  max-width: 500px;\n  margin: 0 40px;\n}\n\n.search-input {\n  width: 100%;\n}\n\n.nav-right {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.user-dropdown {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.user-dropdown:hover {\n  background-color: #f5f5f5;\n}\n\n.user-name {\n  font-size: 14px;\n}\n\n.main {\n  flex: 1;\n  max-width: 1200px;\n  margin: 20px auto;\n  width: 100%;\n  padding: 0 20px;\n}\n\n.footer {\n  background-color: #f5f7fa;\n  padding: 20px 0;\n  margin-top: auto;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  text-align: center;\n  color: #606266;\n}\n\n.footer-content p {\n  margin: 5px 0;\n}\n\n/* 过渡动画 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
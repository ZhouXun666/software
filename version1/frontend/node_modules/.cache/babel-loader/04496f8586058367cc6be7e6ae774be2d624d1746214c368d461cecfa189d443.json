{"ast":null,"code":"import { userAPI } from '../api';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '用户名长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: '密码长度不能少于 6 个字符',\n          trigger: 'blur'\n        }]\n      },\n      loading: false\n    };\n  },\n  methods: {\n    async handleLogin() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if (valid) {\n          this.loading = true;\n          try {\n            const response = await userAPI.login(this.loginForm);\n            // 保存token和用户信息\n            localStorage.setItem('token', response.token);\n            localStorage.setItem('userInfo', JSON.stringify(response.user));\n            // 显示成功消息\n            this.$message.success('登录成功');\n            // 跳转到首页\n            this.$router.push('/');\n          } catch (error) {\n            this.$message.error(error.response?.data?.message || '登录失败，请检查用户名和密码');\n          } finally {\n            this.loading = false;\n          }\n        }\n      });\n    },\n    goToRegister() {\n      this.$router.push('/register');\n    }\n  }\n};","map":{"version":3,"names":["userAPI","name","data","loginForm","username","password","loginRules","required","message","trigger","min","max","loading","methods","handleLogin","$refs","loginFormRef","validate","valid","response","login","localStorage","setItem","token","JSON","stringify","user","$message","success","$router","push","error","goToRegister"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <template #header>\n        <div class=\"login-title\">\n          <h2>校园二手商品交易系统</h2>\n          <p>用户登录</p>\n        </div>\n      </template>\n      <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginFormRef\" label-width=\"80px\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"loginForm.username\" placeholder=\"请输入用户名\" prefix-icon=\"el-icon-user\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"请输入密码\" prefix-icon=\"el-icon-lock\" show-password />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleLogin\" :loading=\"loading\" class=\"login-btn\">登录</el-button>\n          <el-button type=\"text\" @click=\"goToRegister\">去注册</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { userAPI } from '../api'\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能少于 6 个字符', trigger: 'blur' }\n        ]\n      },\n      loading: false\n    }\n  },\n  methods: {\n    async handleLogin() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (valid) {\n          this.loading = true\n          try {\n            const response = await userAPI.login(this.loginForm)\n            // 保存token和用户信息\n            localStorage.setItem('token', response.token)\n            localStorage.setItem('userInfo', JSON.stringify(response.user))\n            // 显示成功消息\n            this.$message.success('登录成功')\n            // 跳转到首页\n            this.$router.push('/')\n          } catch (error) {\n            this.$message.error(error.response?.data?.message || '登录失败，请检查用户名和密码')\n          } finally {\n            this.loading = false\n          }\n        }\n      })\n    },\n    goToRegister() {\n      this.$router.push('/register')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n}\n\n.login-card {\n  width: 100%;\n  max-width: 400px;\n  border-radius: 10px;\n  overflow: hidden;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.login-title h2 {\n  color: #303133;\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.login-title p {\n  color: #606266;\n  font-size: 16px;\n}\n\n.login-btn {\n  width: 100%;\n  height: 40px;\n  font-size: 16px;\n}\n\n.el-form {\n  padding: 0 20px 20px;\n}\n</style>"],"mappings":"AA0BA,SAASA,OAAM,QAAS,QAAO;AAE/B,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,UAAU,EAAE;QACVF,QAAQ,EAAE,CACR;UAAEG,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,QAAQ;UAAEC,OAAO,EAAE;QAAO,CAAC,EACtD;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,EAAE;UAAEH,OAAO,EAAE,mBAAmB;UAAEC,OAAO,EAAE;QAAO,EAClE;QACDJ,QAAQ,EAAE,CACR;UAAEE,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAO,CAAC,EACrD;UAAEC,GAAG,EAAE,CAAC;UAAEF,OAAO,EAAE,gBAAgB;UAAEC,OAAO,EAAE;QAAO;MAEzD,CAAC;MACDG,OAAO,EAAE;IACX;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,QAAQ,CAAC,MAAOC,KAAK,IAAK;QAChD,IAAIA,KAAK,EAAE;UACT,IAAI,CAACN,OAAM,GAAI,IAAG;UAClB,IAAI;YACF,MAAMO,QAAO,GAAI,MAAMnB,OAAO,CAACoB,KAAK,CAAC,IAAI,CAACjB,SAAS;YACnD;YACAkB,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACI,KAAK;YAC5CF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEE,IAAI,CAACC,SAAS,CAACN,QAAQ,CAACO,IAAI,CAAC;YAC9D;YACA,IAAI,CAACC,QAAQ,CAACC,OAAO,CAAC,MAAM;YAC5B;YACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG;UACvB,EAAE,OAAOC,KAAK,EAAE;YACd,IAAI,CAACJ,QAAQ,CAACI,KAAK,CAACA,KAAK,CAACZ,QAAQ,EAAEjB,IAAI,EAAEM,OAAM,IAAK,gBAAgB;UACvE,UAAU;YACR,IAAI,CAACI,OAAM,GAAI,KAAI;UACrB;QACF;MACF,CAAC;IACH,CAAC;IACDoB,YAAYA,CAAA,EAAG;MACb,IAAI,CAACH,OAAO,CAACC,IAAI,CAAC,WAAW;IAC/B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
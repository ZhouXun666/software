{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"login-card\"\n  }, {\n    header: _withCtx(() => [...(_cache[2] || (_cache[2] = [_createElementVNode(\"div\", {\n      class: \"login-title\"\n    }, [_createElementVNode(\"h2\", null, \"校园二手商品交易系统\"), _createElementVNode(\"p\", null, \"用户登录\")], -1 /* CACHED */)]))]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $data.loginForm,\n      rules: $data.loginRules,\n      ref: \"loginFormRef\",\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"用户名\",\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.loginForm.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n          placeholder: \"请输入用户名\",\n          \"prefix-icon\": \"el-icon-user\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"密码\",\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.loginForm.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n          type: \"password\",\n          placeholder: \"请输入密码\",\n          \"prefix-icon\": \"el-icon-lock\",\n          \"show-password\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $options.handleLogin,\n          loading: $data.loading,\n          class: \"login-btn\"\n        }, {\n          default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\"登录\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"loading\"]), _createVNode(_component_el_button, {\n          type: \"text\",\n          onClick: $options.goToRegister\n        }, {\n          default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\"去注册\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","_component_el_form","model","$data","loginForm","rules","loginRules","ref","_component_el_form_item","label","prop","_component_el_input","username","$event","placeholder","password","type","_component_el_button","onClick","$options","handleLogin","loading","goToRegister"],"sources":["D:\\文档\\学习\\专业课实验报告书\\专业选修\\软件工程\\version1\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <template #header>\n        <div class=\"login-title\">\n          <h2>校园二手商品交易系统</h2>\n          <p>用户登录</p>\n        </div>\n      </template>\n      <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginFormRef\" label-width=\"80px\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"loginForm.username\" placeholder=\"请输入用户名\" prefix-icon=\"el-icon-user\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"请输入密码\" prefix-icon=\"el-icon-lock\" show-password />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleLogin\" :loading=\"loading\" class=\"login-btn\">登录</el-button>\n          <el-button type=\"text\" @click=\"goToRegister\">去注册</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { userAPI } from '../api'\n\nexport default {\n  name: 'UserLogin',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, message: '密码长度不能少于 6 个字符', trigger: 'blur' }\n        ]\n      },\n      loading: false\n    }\n  },\n  methods: {\n    async handleLogin() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (valid) {\n          this.loading = true\n          try {\n            const response = await userAPI.login(this.loginForm)\n            // 保存token和用户信息\n            localStorage.setItem('token', response.token)\n            localStorage.setItem('userInfo', JSON.stringify(response.user))\n            console.log(response.user)\n            // 显示成功消息\n            this.$message.success('登录成功')\n            // 跳转到首页\n            this.$router.push('/')\n          } catch (error) {\n            this.$message.error(error.response?.data?.message || '登录失败，请检查用户名和密码')\n          } finally {\n            this.loading = false\n          }\n        }\n      })\n    },\n    goToRegister() {\n      this.$router.push('/register')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n}\n\n.login-card {\n  width: 100%;\n  max-width: 400px;\n  border-radius: 10px;\n  overflow: hidden;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.login-title h2 {\n  color: #303133;\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.login-title p {\n  color: #606266;\n  font-size: 16px;\n}\n\n.login-btn {\n  width: 100%;\n  height: 40px;\n  font-size: 16px;\n}\n\n.el-form {\n  padding: 0 20px 20px;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;;;;;;uBAA5BC,mBAAA,CAqBM,OArBNC,UAqBM,GApBJC,YAAA,CAmBUC,kBAAA;IAnBDJ,KAAK,EAAC;EAAY;IACdK,MAAM,EAAAC,QAAA,CACf,MAGM,KAAAC,MAAA,QAAAA,MAAA,OAHNC,mBAAA,CAGM;MAHDR,KAAK,EAAC;IAAa,IACtBQ,mBAAA,CAAmB,YAAf,YAAU,GACdA,mBAAA,CAAW,WAAR,MAAI,E;sBAGX,MAWU,CAXVL,YAAA,CAWUM,kBAAA;MAXAC,KAAK,EAAEC,KAAA,CAAAC,SAAS;MAAGC,KAAK,EAAEF,KAAA,CAAAG,UAAU;MAAEC,GAAG,EAAC,cAAc;MAAC,aAAW,EAAC;;wBAC7E,MAEe,CAFfZ,YAAA,CAEea,uBAAA;QAFDC,KAAK,EAAC,KAAK;QAACC,IAAI,EAAC;;0BAC7B,MAAyF,CAAzFf,YAAA,CAAyFgB,mBAAA;sBAAtER,KAAA,CAAAC,SAAS,CAACQ,QAAQ;qEAAlBT,KAAA,CAAAC,SAAS,CAACQ,QAAQ,GAAAC,MAAA;UAAEC,WAAW,EAAC,QAAQ;UAAC,aAAW,EAAC;;;UAE1EnB,YAAA,CAEea,uBAAA;QAFDC,KAAK,EAAC,IAAI;QAACC,IAAI,EAAC;;0BAC5B,MAAsH,CAAtHf,YAAA,CAAsHgB,mBAAA;sBAAnGR,KAAA,CAAAC,SAAS,CAACW,QAAQ;qEAAlBZ,KAAA,CAAAC,SAAS,CAACW,QAAQ,GAAAF,MAAA;UAAEG,IAAI,EAAC,UAAU;UAACF,WAAW,EAAC,OAAO;UAAC,aAAW,EAAC,cAAc;UAAC,eAAa,EAAb;;;UAExGnB,YAAA,CAGea,uBAAA;0BAFb,MAAkG,CAAlGb,YAAA,CAAkGsB,oBAAA;UAAvFD,IAAI,EAAC,SAAS;UAAEE,OAAK,EAAEC,QAAA,CAAAC,WAAW;UAAGC,OAAO,EAAElB,KAAA,CAAAkB,OAAO;UAAE7B,KAAK,EAAC;;4BAAY,MAAE,KAAAO,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,mB;;mDACtFJ,YAAA,CAA4DsB,oBAAA;UAAjDD,IAAI,EAAC,MAAM;UAAEE,OAAK,EAAEC,QAAA,CAAAG;;4BAAc,MAAG,KAAAvB,MAAA,QAAAA,MAAA,O,iBAAH,KAAG,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}